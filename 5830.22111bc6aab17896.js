"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5830],{5830:(ee,p,s)=>{s.r(p),s.d(p,{RegistroPageModule:()=>$});var f=s(6895),l=s(433),t=s(5035),m=s(1407),g=s(655),v=s(4575),e=s(8256),_=s(2340),Z=s(529);const h=_.N.API.API_URL+_.N.API.API_REGISTRO_USUARIO_ENDPOINT;let T=(()=>{class o{constructor(r){this.http=r}registro(r){return this.http.post(h,r)}}return o.\u0275fac=function(r){return new(r||o)(e.LFG(Z.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function P(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"El correo es requerido"),e.qZA())}function A(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"El correo es inv\xe1lido"),e.qZA())}function I(o,i){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,P,2,0,"span",9),e.YNc(2,A,2,0,"span",9),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.email)}}function b(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"El nombre es requerido"),e.qZA())}function R(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"El nombre necesita un m\xednimo de 4 caracteres"),e.qZA())}function q(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"El nombre necesita un m\xe1ximo de 60 caracteres"),e.qZA())}function C(o,i){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,b,2,0,"span",9),e.YNc(2,R,2,0,"span",9),e.YNc(3,q,2,0,"span",9),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.nombre||null==r.nombre.errors?null:r.nombre.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.nombre||null==r.nombre.errors?null:r.nombre.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==r.nombre||null==r.nombre.errors?null:r.nombre.errors.maxlength)}}function w(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La edad es requerida"),e.qZA())}function N(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La edad m\xednima es de 18 a\xf1os."),e.qZA())}function x(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La edad m\xe1xima es de 99 a\xf1os."),e.qZA())}function U(o,i){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,w,2,0,"span",9),e.YNc(2,N,2,0,"span",9),e.YNc(3,x,2,0,"span",9),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.edad||null==r.edad.errors?null:r.edad.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.edad||null==r.edad.errors?null:r.edad.errors.min),e.xp6(1),e.Q6J("ngIf",null==r.edad||null==r.edad.errors?null:r.edad.errors.max)}}function y(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La residencia es requerida"),e.qZA())}function J(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La residencia necesita un m\xednimo de 4 caracteres"),e.qZA())}function Y(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"la residencia necesita un m\xe1ximo de 20 caracteres"),e.qZA())}function D(o,i){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,y,2,0,"span",9),e.YNc(2,J,2,0,"span",9),e.YNc(3,Y,2,0,"span",9),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.residencia||null==r.residencia.errors?null:r.residencia.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.residencia||null==r.residencia.errors?null:r.residencia.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==r.residencia||null==r.residencia.errors?null:r.residencia.errors.maxlength)}}function Q(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"ion-button",15),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.crearPerfilDermatologico())}),e._uU(1," Crear perfil dematol\xf3gico "),e.qZA()}}function k(o,i){1&o&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-checkbox",16),e.TgZ(2,"ion-label"),e._uU(3,"Pefil dematol\xf3gico creado"),e.qZA()())}function E(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"El perfil dematol\xf3gico es requerido"),e.qZA())}function L(o,i){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,E,2,0,"span",9),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.validacionPerfilDematologico||null==r.validacionPerfilDematologico.errors?null:r.validacionPerfilDematologico.errors.required)}}function F(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1a es requerida"),e.qZA())}function S(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1a nombre necesita un m\xednimo de 4 caracteres"),e.qZA())}function G(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1a necesita un m\xe1ximo de 60 caracteres"),e.qZA())}function B(o,i){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,F,2,0,"span",9),e.YNc(2,S,2,0,"span",9),e.YNc(3,G,2,0,"span",9),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.password||null==r.password.errors?null:r.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.password||null==r.password.errors?null:r.password.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==r.password||null==r.password.errors?null:r.password.errors.maxlength)}}function M(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1a es requerida"),e.qZA())}function V(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1a necesita un m\xednimo de 4 caracteres"),e.qZA())}function z(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1a necesita un m\xe1ximo de 60 caracteres"),e.qZA())}function O(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1as deben coincidir"),e.qZA())}function j(o,i){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,M,2,0,"span",9),e.YNc(2,V,2,0,"span",9),e.YNc(3,z,2,0,"span",9),e.YNc(4,O,2,0,"span",9),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.passwordConfirmation||null==r.passwordConfirmation.errors?null:r.passwordConfirmation.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.passwordConfirmation||null==r.passwordConfirmation.errors?null:r.passwordConfirmation.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==r.passwordConfirmation||null==r.passwordConfirmation.errors?null:r.passwordConfirmation.errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==r.passwordConfirmation||null==r.passwordConfirmation.errors?null:r.passwordConfirmation.errors.confirmedValidator)}}function H(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"Aceptar termino y condiciones es requerido"),e.qZA())}function K(o,i){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,H,2,0,"span",9),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.terminosCondiciones||null==r.terminosCondiciones.errors?null:r.terminosCondiciones.errors.required)}}const W=[{path:"",component:(()=>{class o{constructor(r,n,a,u,c,d){this.fb=r,this.alertController=n,this.router=a,this.loadingController=u,this.registroService=c,this.modalCtrl=d,this.registro=this.fb.group({email:["",[l.kI.required,l.kI.email]],nombre:["",[l.kI.required,l.kI.minLength(4),l.kI.maxLength(60)]],edad:[null,[l.kI.required,l.kI.max(99),l.kI.min(18)]],residencia:["",[l.kI.required,l.kI.minLength(4),l.kI.maxLength(20)]],validacionPerfilDematologico:[!1,[l.kI.requiredTrue]],perfilDematologico:[null],password:["",[l.kI.required,l.kI.minLength(6),l.kI.maxLength(24)]],passwordConfirmation:["",[l.kI.required,l.kI.minLength(6),l.kI.maxLength(24)]],terminosCondiciones:[!1,[l.kI.requiredTrue]]},{validators:this.confirmedValidator("password","passwordConfirmation")})}crearPerfilDermatologico(){var r,n,a;return(0,g.mG)(this,void 0,void 0,function*(){const u=yield this.modalCtrl.create({component:v.T});u.present();const{data:c,role:d}=yield u.onWillDismiss();"escoger"===d&&(null===(r=this.registro.get("validacionPerfilDematologico"))||void 0===r||r.setValue(!0),null===(n=this.registro.get("validacionPerfilDematologico"))||void 0===n||n.disable(),null===(a=this.registro.get("perfilDematologico"))||void 0===a||a.setValue(c))})}registrarse(){var r;return(0,g.mG)(this,void 0,void 0,function*(){if(this.registro.invalid)Object.keys(this.registro.controls).forEach(n=>{var a;null===(a=this.registro.get(n))||void 0===a||a.markAllAsTouched()}),null==(null===(r=this.registro.get("perfilDematologico"))||void 0===r?void 0:r.value)&&(yield(yield this.alertController.create({header:"Registro",message:"Debe crear un perfil dermatol\xf3gico para continuar.",buttons:["Aceptar"]})).present());else{const n=yield this.loadingController.create();yield n.present(),this.registroService.registro(this.transformarParaBackend(this.registro.value)).subscribe({next:a=>(0,g.mG)(this,void 0,void 0,function*(){yield n.dismiss(),yield n.dismiss(),yield(yield this.alertController.create({header:"Registro Exitoso",message:"Gracias por registrarse en DermoApp",buttons:["Aceptar"]})).present(),this.router.navigateByUrl("/login",{replaceUrl:!0})}),error:a=>(0,g.mG)(this,void 0,void 0,function*(){yield n.dismiss(),yield(yield this.alertController.create({header:"Registro fallido",message:a.error.error,buttons:["Aceptar"]})).present()})})}})}transformarParaBackend(r){return{email:r.email,names:r.nombre,password:r.password,age:r.edad,location:r.residencia,dermatological_profile_uuid:r.perfilDematologico}}get email(){return this.registro.get("email")}get nombre(){return this.registro.get("nombre")}get edad(){return this.registro.get("edad")}get residencia(){return this.registro.get("residencia")}get validacionPerfilDematologico(){return this.registro.get("validacionPerfilDematologico")}get perfilDematologico(){return this.registro.get("perfilDematologico")}get password(){return this.registro.get("password")}get passwordConfirmation(){return this.registro.get("passwordConfirmation")}get terminosCondiciones(){return this.registro.get("terminosCondiciones")}confirmedValidator(r,n){return a=>{var u;const d=a.controls[n];d.errors&&(null===(u=d.errors)||void 0===u||!u.confirmedValidator)||d.setErrors(a.controls[r].value!==d.value?{confirmedValidator:!0}:null)}}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(l.qu),e.Y36(t.Br),e.Y36(m.F0),e.Y36(t.HT),e.Y36(T),e.Y36(t.IN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-registro"]],decls:51,vars:11,consts:[[1,"center"],[3,"formGroup","ngSubmit"],[1,"input-group"],["type","email","placeholder","Email","formControlName","email"],["class","form-error",4,"ngIf"],["type","text","placeholder","Nombre","formControlName","nombre"],["type","number","placeholder","Edad","formControlName","edad"],["type","text","placeholder","Residencia","formControlName","residencia"],["id","perfil-dermatologico-button","type","button","expand","block",3,"click",4,"ngIf"],[4,"ngIf"],["type","password","placeholder","Password","formControlName","password"],["type","password","placeholder","Password","formControlName","passwordConfirmation"],["slot","start","formControlName","terminosCondiciones"],["id","register-button","type","submit","expand","block",3,"click"],[1,"form-error"],["id","perfil-dermatologico-button","type","button","expand","block",3,"click"],["slot","start","formControlName","validacionPerfilDematologico"]],template:function(r,n){1&r&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3,"Registro"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"form",1),e.NdJ("ngSubmit",function(){return n.registrarse()}),e.TgZ(6,"div",2)(7,"ion-item")(8,"ion-label"),e._uU(9,"Email"),e.qZA(),e._UZ(10,"ion-input",3),e.qZA(),e.YNc(11,I,3,2,"div",4),e.TgZ(12,"ion-item")(13,"ion-label"),e._uU(14,"Nombre"),e.qZA(),e._UZ(15,"ion-input",5),e.qZA(),e.YNc(16,C,4,3,"div",4),e.TgZ(17,"ion-item")(18,"ion-label"),e._uU(19,"Edad"),e.qZA(),e._UZ(20,"ion-input",6),e.qZA(),e.YNc(21,U,4,3,"div",4),e.TgZ(22,"ion-item")(23,"ion-label"),e._uU(24,"Lugar de residencia"),e.qZA(),e._UZ(25,"ion-input",7),e.qZA(),e.YNc(26,D,4,3,"div",4),e.YNc(27,Q,2,0,"ion-button",8),e.YNc(28,k,4,0,"ion-item",9),e.YNc(29,L,2,1,"div",4),e.TgZ(30,"ion-item")(31,"ion-label"),e._uU(32,"Contrase\xf1a"),e.qZA(),e._UZ(33,"ion-input",10),e.qZA(),e.YNc(34,B,4,3,"div",4),e.TgZ(35,"ion-item")(36,"ion-label"),e._uU(37,"Confirmar Contrase\xf1a"),e.qZA(),e._UZ(38,"ion-input",11),e.qZA(),e.YNc(39,j,5,4,"div",4),e.TgZ(40,"ion-item"),e._UZ(41,"ion-checkbox",12),e.TgZ(42,"ion-label"),e._uU(43,"Aceptar terminos y condiciones. "),e.TgZ(44,"a"),e._uU(45,"Leer"),e.qZA()()(),e.YNc(46,K,2,1,"div",4),e.qZA()()(),e.TgZ(47,"ion-footer")(48,"div",0)(49,"ion-button",13),e.NdJ("click",function(){return n.registrarse()}),e._uU(50," Registrarse "),e.qZA()()()),2&r&&(e.xp6(5),e.Q6J("formGroup",n.registro),e.xp6(6),e.Q6J("ngIf",((null==n.email?null:n.email.dirty)||(null==n.email?null:n.email.touched))&&(null==n.email?null:n.email.errors)),e.xp6(5),e.Q6J("ngIf",((null==n.nombre?null:n.nombre.dirty)||(null==n.nombre?null:n.nombre.touched))&&(null==n.nombre?null:n.nombre.errors)),e.xp6(5),e.Q6J("ngIf",((null==n.edad?null:n.edad.dirty)||(null==n.edad?null:n.edad.touched))&&(null==n.edad?null:n.edad.errors)),e.xp6(5),e.Q6J("ngIf",((null==n.residencia?null:n.residencia.dirty)||(null==n.residencia?null:n.residencia.touched))&&(null==n.residencia?null:n.residencia.errors)),e.xp6(1),e.Q6J("ngIf",!(null!=n.validacionPerfilDematologico&&n.validacionPerfilDematologico.value)),e.xp6(1),e.Q6J("ngIf",null==n.validacionPerfilDematologico?null:n.validacionPerfilDematologico.value),e.xp6(1),e.Q6J("ngIf",((null==n.validacionPerfilDematologico?null:n.validacionPerfilDematologico.dirty)||(null==n.validacionPerfilDematologico?null:n.validacionPerfilDematologico.touched))&&(null==n.residencia?null:n.residencia.errors)),e.xp6(5),e.Q6J("ngIf",((null==n.password?null:n.password.dirty)||(null==n.password?null:n.password.touched))&&(null==n.password?null:n.password.errors)),e.xp6(5),e.Q6J("ngIf",((null==n.passwordConfirmation?null:n.passwordConfirmation.dirty)||(null==n.passwordConfirmation?null:n.passwordConfirmation.touched))&&(null==n.passwordConfirmation?null:n.passwordConfirmation.errors)),e.xp6(7),e.Q6J("ngIf",((null==n.terminosCondiciones?null:n.terminosCondiciones.dirty)||(null==n.terminosCondiciones?null:n.terminosCondiciones.touched))&&(null==n.terminosCondiciones?null:n.terminosCondiciones.errors)))},dependencies:[f.O5,l._Y,l.JJ,l.JL,t.YG,t.nz,t.W2,t.fr,t.Gu,t.pK,t.Ie,t.Q$,t.wd,t.sr,t.w,t.as,t.j9,l.sg,l.u]}),o})()}];let X=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(W),m.Bz]}),o})(),$=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez,l.u5,t.Pc,X,l.UX]}),o})()}}]);