"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7846],{7846:(H,d,a)=>{a.r(d),a.d(d,{ConsultasPageModule:()=>U});var l=a(6895),g=a(433),n=a(5035),c=a(6955),u=a(655),i=a(8256),m=a(3079),v=a(7556),h=a(2340),C=a(529);const f=h.N.API.CLINICAL_HISTORY_URL+h.N.API.API_HISTORIAS_CLINICAS_ENDPOINT;let P=(()=>{class e{constructor(t){this.http=t}obtenerHistoriasCLinicas(t){return this.http.get(f+"/"+t)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(C.eN))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function A(e,s){if(1&e&&(i.TgZ(0,"div")(1,"h2"),i._uU(2,"Historia m\xe9dica del paciente:"),i.qZA(),i.TgZ(3,"h2"),i._uU(4),i.qZA(),i.TgZ(5,"ion-list")(6,"ion-item")(7,"ion-label"),i._uU(8,"Informaci\xf3n del paciente"),i.qZA()(),i.TgZ(9,"ion-item"),i._UZ(10,"ion-textarea",6),i.qZA(),i.TgZ(11,"ion-item")(12,"ion-label"),i._uU(13,"Fecha \xfaltima actualizaci\xf3n"),i.qZA(),i._UZ(14,"ion-input",7),i.ALo(15,"date"),i.qZA()()()),2&e){const t=i.oxw();i.xp6(4),i.Oqu(null==t.paciente?null:t.paciente.nombre),i.xp6(6),i.s9C("value",t.informacionPaciente),i.Q6J("autoGrow",!0),i.xp6(4),i.s9C("value",i.lcZ(15,4,null==t.historiaClinica?null:t.historiaClinica.ultimaActualizacion))}}const I=function(e){return{casoMedicoId:e}},Z=function(e){return["/detalle-consulta",e]};function T(e,s){if(1&e&&(i.TgZ(0,"ion-item")(1,"ion-label"),i._uU(2),i.qZA(),i.TgZ(3,"ion-button",8),i._uU(4,"Ver detalle"),i.qZA()()),2&e){const t=s.$implicit,o=s.index;i.xp6(2),i.hij("Caso medico ",o+1,""),i.xp6(1),i.Q6J("routerLink",i.VKq(4,Z,i.VKq(2,I,t)))}}const S=function(e){return{"web-view":e}},b=[{path:"",component:(()=>{class e{constructor(t,o,r,p,F,L,M){this.appService=t,this.route=o,this.authService=r,this.alertController=p,this.router=F,this.consultasService=L,this.loadingController=M,this.isPhone=!1,this.paciente=null,this.informacionPaciente="",this.historiaClinica=null,this.isPhone=this.appService.isPhone}crearInformacionPaciente(){var t,o,r;this.informacionPaciente=`Edad: ${null===(t=this.paciente)||void 0===t?void 0:t.edad}\nEmail: ${null===(o=this.paciente)||void 0===o?void 0:o.email}\nLocaci\xf3n: ${null===(r=this.paciente)||void 0===r?void 0:r.locacion}`}obtenerHistoriasClinicas(t){return(0,u.mG)(this,void 0,void 0,function*(){const o=yield this.loadingController.create();yield o.present(),this.consultasService.obtenerHistoriasCLinicas(t).subscribe({next:r=>(0,u.mG)(this,void 0,void 0,function*(){yield o.dismiss(),this.historiaClinica=this.convertirHistoriasClinicasBackendAFrontEnd(r.clinical_history),console.log(this.historiaClinica)}),error:r=>(0,u.mG)(this,void 0,void 0,function*(){yield o.dismiss(),yield(yield this.alertController.create({header:"Error obteniendo la historia clinica",message:r.error.error,buttons:["Aceptar"]})).present()})})})}convertirHistoriasClinicasBackendAFrontEnd(t){return{pacienteId:t.patient_uuid,ultimaActualizacion:t.updated_at,casosMedicos:t.medical_cases}}ngOnInit(){const t=this.route.snapshot.paramMap.get("pacienteId");null===t?this.erroObteniendoPaciente():this.isPhone?this.obtenerHistoriasClinicas(t):this.cargaInfoParaMedico(t)}cargaInfoParaMedico(t){this.paciente=this.authService.getPaciente(t),console.log("Paciente: ",this.paciente),this.paciente?(this.crearInformacionPaciente(),this.obtenerHistoriasClinicas(this.paciente.uuid)):this.erroObteniendoPaciente()}erroObteniendoPaciente(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Error",message:"Error obteniendo la informacion del paciente",buttons:["Aceptar"]})).present(),this.router.navigateByUrl(this.isPhone?"/inicio":"/historias-clinicas",{replaceUrl:!0})})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(m.z),i.Y36(c.gz),i.Y36(v.e),i.Y36(n.Br),i.Y36(c.F0),i.Y36(P),i.Y36(n.HT))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-consultas"]],decls:13,vars:5,consts:[["slot","start"],[2,"text-align","center"],[3,"ngClass"],[4,"ngIf"],["id","lista-consultas-medicas"],[4,"ngFor","ngForOf"],["disabled","true","placeholder","Escriba el tratamiento",3,"autoGrow","value"],[3,"value"],["slot","end",3,"routerLink"]],template:function(t,o){1&t&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i._uU(3,"Dermo App"),i.qZA(),i.TgZ(4,"ion-buttons",0),i._UZ(5,"ion-menu-button"),i.qZA()()(),i.TgZ(6,"ion-content",1)(7,"div",2),i.YNc(8,A,16,6,"div",3),i.TgZ(9,"h2"),i._uU(10,"Listado de consultas"),i.qZA(),i.TgZ(11,"ion-list",4),i.YNc(12,T,5,6,"ion-item",5),i.qZA()()()),2&t&&(i.xp6(7),i.Q6J("ngClass",i.VKq(3,S,!o.isPhone)),i.xp6(1),i.Q6J("ngIf",!o.isPhone),i.xp6(4),i.Q6J("ngForOf",null==o.historiaClinica?null:o.historiaClinica.casosMedicos))},dependencies:[l.mk,l.sg,l.O5,n.YG,n.Sm,n.W2,n.Gu,n.pK,n.Ie,n.Q$,n.q_,n.fG,n.g2,n.wd,n.sr,n.j9,n.YI,c.rH,l.uU]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[c.Bz.forChild(b),c.Bz]}),e})(),U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[l.ez,g.u5,n.Pc,y]}),e})()}}]);