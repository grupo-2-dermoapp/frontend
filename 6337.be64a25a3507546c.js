"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6337],{6337:(E,m,l)=>{l.r(m),l.d(m,{CrearConsultaPageModule:()=>j});var d=l(6895),a=l(433),r=l(5035),g=l(6955),c=l(655),_=l(253),e=l(8256),v=l(3079),C=l(2340),h=l(529);const f=C.N.API.MEDICAL_CASES_URL+C.N.API.API_CASOS_MEDICOS_ENDPOINT;let Z=(()=>{class o{constructor(n){this.http=n}crearConsulta(n){return console.log("Crear consulta",f,n),this.http.post(f,n)}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(h.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var T=l(7556);function A(o,i){if(1&o&&(e.TgZ(0,"ion-select-option",15),e._uU(1),e.qZA()),2&o){const n=i.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.value,"")}}function P(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"Campo requerido"),e.qZA())}function b(o,i){if(1&o&&(e.TgZ(0,"div",16),e.YNc(1,P,2,0,"span",13),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.tipoLesion||null==n.tipoLesion.errors?null:n.tipoLesion.errors.required)}}function L(o,i){if(1&o&&(e.TgZ(0,"ion-select-option",17),e._uU(1),e.qZA()),2&o){const n=i.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.value,"")}}function y(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"Campo requerido"),e.qZA())}function D(o,i){if(1&o&&(e.TgZ(0,"div",16),e.YNc(1,y,2,0,"span",13),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.formaLesion||null==n.formaLesion.errors?null:n.formaLesion.errors.required)}}function q(o,i){if(1&o&&(e.TgZ(0,"ion-select-option",17),e._uU(1),e.qZA()),2&o){const n=i.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.value,"")}}function I(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"Campo requerido"),e.qZA())}function N(o,i){if(1&o&&(e.TgZ(0,"div",16),e.YNc(1,I,2,0,"span",13),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.numeroLesiones||null==n.numeroLesiones.errors?null:n.numeroLesiones.errors.required)}}function J(o,i){if(1&o&&(e.TgZ(0,"ion-select-option",17),e._uU(1),e.qZA()),2&o){const n=i.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.value,"")}}function U(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"Campo requerido"),e.qZA())}function x(o,i){if(1&o&&(e.TgZ(0,"div",16),e.YNc(1,U,2,0,"span",13),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.distribucion||null==n.distribucion.errors?null:n.distribucion.errors.required)}}function Y(o,i){if(1&o){const n=e.EpF();e.TgZ(0,"div")(1,"h2",4),e._uU(2,"Parte del cuerpo"),e.qZA(),e.TgZ(3,"ion-item")(4,"ion-button",18),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.escogerParteDelCuerpo())}),e._uU(5," Seleccionar parte del cuerpo "),e.qZA()()()}}function F(o,i){1&o&&(e.TgZ(0,"div")(1,"ion-item")(2,"ion-label"),e._uU(3," Parte del cuerpo: "),e.qZA(),e._UZ(4,"ion-input",19),e.qZA()()),2&o&&(e.xp6(4),e.Q6J("disabled",!0))}function Q(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"Campo requerido"),e.qZA())}function S(o,i){if(1&o&&(e.TgZ(0,"div",16),e.YNc(1,Q,2,0,"span",13),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.parteDelCuerpo||null==n.parteDelCuerpo.errors?null:n.parteDelCuerpo.errors.required)}}const O=[{path:"",component:(()=>{class o{constructor(n,t,s,u,p,k,G,B){this.fb=n,this.alertController=t,this.router=s,this.loadingController=u,this.app=p,this.crearConsultaService=k,this.modalCtrl=G,this.authService=B,this.consulta=this.fb.group({tipoLesion:[null,[a.kI.required]],formaLesion:[null,[a.kI.required]],numeroLesiones:[null,[a.kI.required]],distribucion:[null,[a.kI.required]],parteDelCuerpo:["",[a.kI.required]],parteDelCuerpoId:[null]})}crearConsulta(){return(0,c.mG)(this,void 0,void 0,function*(){this.consulta.markAsDirty(),Object.keys(this.consulta.controls).forEach(n=>{var t;null===(t=this.consulta.get(n))||void 0===t||t.markAllAsTouched()}),this.consulta.valid&&(yield this.crearConsultaTipoDiagnostico())})}crearConsultaTipoDiagnostico(){return(0,c.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:"Seleccione el tipo de digan\xf3stico",buttons:["Cancelar","Aceptar"],inputs:[{label:"Auto-generado",type:"radio",value:"AUTO"},{label:"Medico",type:"radio",value:"DOCTOR"}]});yield n.present();const{data:t}=yield n.onDidDismiss();console.log(t);const s=yield this.loadingController.create();yield s.present(),this.crearConsultaService.crearConsulta(this.transformarParaBackend(this.consulta.value,t.values)).subscribe({next:u=>(0,c.mG)(this,void 0,void 0,function*(){yield s.dismiss(),yield(yield this.alertController.create({header:"Creaci\xf3n de caso medico",message:"Creaci\xf3n de caso medico exitoso",buttons:["Aceptar"]})).present(),this.router.navigateByUrl("/inicio",{replaceUrl:!0})}),error:u=>(0,c.mG)(this,void 0,void 0,function*(){yield s.dismiss(),yield(yield this.alertController.create({header:"Creaci\xf3n de caso medico",message:"Hubo un error creando el caso medico",buttons:["Aceptar"]})).present()})})})}transformarParaBackend(n,t){return{type_of_injury:n.tipoLesion,shape_of_injury:n.formaLesion,number_of_injuries:n.numeroLesiones,injury_distribucion:n.distribucion,body_part:n.parteDelCuerpoId,patient_uuid:this.authService.user.user_id,type_of_diagnosis:t}}escogerParteDelCuerpo(){var n,t;return(0,c.mG)(this,void 0,void 0,function*(){console.log("Escogiendo parte del cuerpo");const s=yield this.modalCtrl.create({component:_.i});s.present();const{data:u,role:p}=yield s.onWillDismiss();"escoger"===p&&(console.log("Parte del cuerpo ",u),null===(n=this.consulta.get("parteDelCuerpo"))||void 0===n||n.setValue(u.value),null===(t=this.consulta.get("parteDelCuerpoId"))||void 0===t||t.setValue(u.id))})}get tipoLesion(){return this.consulta.get("tipoLesion")}get formaLesion(){return this.consulta.get("formaLesion")}get numeroLesiones(){return this.consulta.get("numeroLesiones")}get distribucion(){return this.consulta.get("distribucion")}get parteDelCuerpo(){return this.consulta.get("parteDelCuerpo")}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(a.qu),e.Y36(r.Br),e.Y36(g.F0),e.Y36(r.HT),e.Y36(v.z),e.Y36(Z),e.Y36(r.IN),e.Y36(T.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-crear-consulta"]],decls:44,vars:12,consts:[[1,"center"],["slot","start"],[1,"crear-consulta-info"],[3,"formGroup","ngSubmit"],[1,"form-title"],[1,"question-label"],["formControlName","tipoLesion","placeholder","Seleccione su tipo de lesi\xf3n",1,"form-item"],["text-wrap","","value","42",3,"value",4,"ngFor","ngForOf"],["class","form-error",4,"ngIf"],["formControlName","formaLesion","placeholder","Seleccione la forma de la lesi\xf3n",1,"form-item"],[3,"value",4,"ngFor","ngForOf"],["formControlName","numeroLesiones","placeholder","Seleccione la cantidad de lesiones",1,"form-item"],["formControlName","distribucion","placeholder","Seleccione la distribuci\xf3n de la lesi\xf3n",1,"form-item"],[4,"ngIf"],["id","crear-consulta-button","expand","block",3,"click"],["text-wrap","","value","42",3,"value"],[1,"form-error"],[3,"value"],["id","parte-cuerpo-button","expand","block","type","button",1,"form-item",3,"click"],["placeholder","","formControlName","parteDelCuerpo",3,"disabled"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3,"Crear consulta"),e.qZA(),e.TgZ(4,"ion-buttons",1),e._UZ(5,"ion-menu-button"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"div",2)(8,"p"),e._uU(9,"Para la creaci\xf3n de una consulta el paciente debe suministrar informaci\xf3n b\xe1sica sobre la lesi\xf3n."),e.qZA()(),e.TgZ(10,"form",3),e.NdJ("ngSubmit",function(){return t.crearConsulta()}),e.TgZ(11,"h2",4),e._uU(12,"Descripci\xf3n de la lesi\xf3n"),e.qZA(),e.TgZ(13,"ion-item")(14,"ion-label",5),e._uU(15,"Tipos de lesi\xf3n:"),e.qZA(),e.TgZ(16,"ion-select",6),e.YNc(17,A,2,2,"ion-select-option",7),e.qZA()(),e.YNc(18,b,2,1,"div",8),e.TgZ(19,"ion-item")(20,"ion-label",5),e._uU(21,"Forma lesi\xf3n"),e.qZA(),e.TgZ(22,"ion-select",9),e.YNc(23,L,2,2,"ion-select-option",10),e.qZA()(),e.YNc(24,D,2,1,"div",8),e.TgZ(25,"ion-item")(26,"ion-label",5),e._uU(27,"N\xfamero de lesiones"),e.qZA(),e.TgZ(28,"ion-select",11),e.YNc(29,q,2,2,"ion-select-option",10),e.qZA()(),e.YNc(30,N,2,1,"div",8),e.TgZ(31,"ion-item")(32,"ion-label",5),e._uU(33,"Distribuci\xf3n de la lesi\xf3n"),e.qZA(),e.TgZ(34,"ion-select",12),e.YNc(35,J,2,2,"ion-select-option",10),e.qZA()(),e.YNc(36,x,2,1,"div",8),e.YNc(37,Y,6,0,"div",13),e.YNc(38,F,5,1,"div",13),e.YNc(39,S,2,1,"div",8),e.qZA()(),e.TgZ(40,"ion-footer")(41,"div",0)(42,"ion-button",14),e.NdJ("click",function(){return t.crearConsulta()}),e._uU(43," Crear consulta "),e.qZA()()()),2&n&&(e.xp6(10),e.Q6J("formGroup",t.consulta),e.xp6(7),e.Q6J("ngForOf",t.app.consulta.tiposDeLesion),e.xp6(1),e.Q6J("ngIf",(null==t.tipoLesion?null:t.tipoLesion.dirty)||(null==t.tipoLesion?null:t.tipoLesion.touched)),e.xp6(5),e.Q6J("ngForOf",t.app.consulta.formasDeLesiones),e.xp6(1),e.Q6J("ngIf",(null==t.formaLesion?null:t.formaLesion.dirty)||(null==t.formaLesion?null:t.formaLesion.touched)),e.xp6(5),e.Q6J("ngForOf",t.app.consulta.numeroDeLesiones),e.xp6(1),e.Q6J("ngIf",(null==t.numeroLesiones?null:t.numeroLesiones.dirty)||(null==t.numeroLesiones?null:t.numeroLesiones.touched)),e.xp6(5),e.Q6J("ngForOf",t.app.consulta.distribucionDeLaLesion),e.xp6(1),e.Q6J("ngIf",(null==t.distribucion?null:t.distribucion.dirty)||(null==t.distribucion?null:t.distribucion.touched)),e.xp6(1),e.Q6J("ngIf",null==t.parteDelCuerpo?null:t.parteDelCuerpo.invalid),e.xp6(1),e.Q6J("ngIf",!(null!=t.parteDelCuerpo&&t.parteDelCuerpo.invalid)),e.xp6(1),e.Q6J("ngIf",(null==t.parteDelCuerpo?null:t.parteDelCuerpo.dirty)||(null==t.parteDelCuerpo?null:t.parteDelCuerpo.touched)))},dependencies:[d.sg,d.O5,a._Y,a.JJ,a.JL,r.YG,r.Sm,r.W2,r.fr,r.Gu,r.pK,r.Ie,r.Q$,r.fG,r.t9,r.n0,r.wd,r.sr,r.QI,r.j9,a.sg,a.u],styles:[".crear-consulta-title[_ngcontent-%COMP%]{padding-top:25px;text-align:center}.crear-consulta-info[_ngcontent-%COMP%]{padding:20px;text-align:justify}.form-item[_ngcontent-%COMP%]{width:100%}.form-title[_ngcontent-%COMP%]{padding-left:20px}ion-select[_ngcontent-%COMP%]::part(placeholder), ion-select[_ngcontent-%COMP%]::part(text){white-space:break-spaces!important}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(O),g.Bz]}),o})(),j=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,a.u5,r.Pc,M,a.UX]}),o})()}}]);