"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7872],{7872:(te,I,s)=>{s.r(I),s.d(I,{DetalleConsultaPageModule:()=>oe});var C=s(6895),l=s(433),a=s(5035),m=s(6955),g=s(655),e=s(8256),L=s(3079),Z=s(2340),q=s(529);const A=Z.N.API.MEDICAL_CASES_URL;let N=(()=>{class t{constructor(o){this.http=o}crearDiagnostico(o){return this.http.post(A+Z.N.API.API_DIAGNOSTICO_ENDPOINT,o)}obtenerConsulta(o){return this.http.get(A+Z.N.API.API_CASOS_MEDICOS_ENDPOINT+"/"+o)}obtenerDiagnostico(o){return this.http.get(A+Z.N.API.API_DIAGNOSTICO_ENDPOINT+"/"+o)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(q.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var U=s(7556);function y(t,i){if(1&t&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.value,"")}}function F(t,i){if(1&t&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.value,"")}}function J(t,i){if(1&t&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.value,"")}}function M(t,i){if(1&t&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.value,"")}}function Q(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"ion-toolbar")(1,"ion-buttons",15)(2,"ion-button",16),e._uU(3,"Cancelar"),e.qZA()(),e.TgZ(4,"ion-buttons",17)(5,"ion-button",18),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.aceptarCasoMedico())}),e._uU(6,"Aceptar caso"),e.qZA()()()}}function S(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El nombre de la lesi\xf3n es requerida"),e.qZA())}function E(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El nombre de la lesi\xf3ntiene que tener m\xednimo 6 caracteres"),e.qZA())}function Y(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El nombre de la lesi\xf3ntiene que tener m\xe1ximo 24 caracteres"),e.qZA())}function G(t,i){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,S,2,0,"span",12),e.YNc(2,E,2,0,"span",12),e.YNc(3,Y,2,0,"span",12),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==o.nombreLesion||null==o.nombreLesion.errors?null:o.nombreLesion.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.nombreLesion||null==o.nombreLesion.errors?null:o.nombreLesion.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==o.nombreLesion||null==o.nombreLesion.errors?null:o.nombreLesion.errors.maxlength)}}function O(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El diagn\xf3stico es requerido"),e.qZA())}function k(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El diagn\xf3stico tiene que tener m\xednimo 20 caracteres"),e.qZA())}function j(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El diagn\xf3stico tiene que tener m\xe1ximo 200 caracteres"),e.qZA())}function V(t,i){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,O,2,0,"span",12),e.YNc(2,k,2,0,"span",12),e.YNc(3,j,2,0,"span",12),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==o.diagnostico||null==o.diagnostico.errors?null:o.diagnostico.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.diagnostico||null==o.diagnostico.errors?null:o.diagnostico.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==o.diagnostico||null==o.diagnostico.errors?null:o.diagnostico.errors.maxlength)}}function w(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El tratamiento es requerido"),e.qZA())}function B(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El tratamiento tiene que tener m\xednimo 20 caracteres"),e.qZA())}function z(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"El tratamiento tiene que tener m\xe1ximo 200 caracteres"),e.qZA())}function H(t,i){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,w,2,0,"span",12),e.YNc(2,B,2,0,"span",12),e.YNc(3,z,2,0,"span",12),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==o.tratamiento||null==o.tratamiento.errors?null:o.tratamiento.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.tratamiento||null==o.tratamiento.errors?null:o.tratamiento.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==o.tratamiento||null==o.tratamiento.errors?null:o.tratamiento.errors.maxlength)}}function R(t,i){1&t&&(e.TgZ(0,"ion-toolbar")(1,"ion-buttons",17)(2,"ion-button",27),e._uU(3,"Enviar diagn\xf3stico"),e.qZA()()())}function $(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",4)(1,"div",19)(2,"strong",20),e._uU(3,"Crear diagn\xf3stico"),e.qZA()(),e._UZ(4,"br"),e.TgZ(5,"form",21),e.NdJ("ngSubmit",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.crearDiagnostico())}),e.TgZ(6,"ion-item")(7,"ion-label",8),e._uU(8,"Nombre lesi\xf3n"),e.qZA()(),e.TgZ(9,"ion-item"),e._UZ(10,"ion-textarea",22),e.qZA(),e.YNc(11,G,4,3,"div",23),e.TgZ(12,"ion-item")(13,"ion-label",8),e._uU(14,"Diagn\xf3stico"),e.qZA()(),e.TgZ(15,"ion-item"),e._UZ(16,"ion-textarea",24),e.qZA(),e.YNc(17,V,4,3,"div",23),e.TgZ(18,"ion-item")(19,"ion-label",8),e._uU(20,"Tratamiento"),e.qZA()(),e.TgZ(21,"ion-item"),e._UZ(22,"ion-textarea",25),e.qZA(),e.YNc(23,H,4,3,"div",23),e.YNc(24,R,4,0,"ion-toolbar",12),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(5),e.Q6J("formGroup",o.diagnosticoForm),e.xp6(5),e.Q6J("autoGrow",!0),e.xp6(1),e.Q6J("ngIf",((null==o.nombreLesion?null:o.nombreLesion.dirty)||(null==o.nombreLesion?null:o.nombreLesion.touched))&&(null==o.nombreLesion?null:o.nombreLesion.errors)),e.xp6(5),e.Q6J("autoGrow",!0),e.xp6(1),e.Q6J("ngIf",((null==o.diagnostico?null:o.diagnostico.dirty)||(null==o.diagnostico?null:o.diagnostico.touched))&&(null==o.diagnostico?null:o.diagnostico.errors)),e.xp6(5),e.Q6J("autoGrow",!0),e.xp6(1),e.Q6J("ngIf",((null==o.tratamiento?null:o.tratamiento.dirty)||(null==o.tratamiento?null:o.tratamiento.touched))&&(null==o.tratamiento?null:o.tratamiento.errors)),e.xp6(1),e.Q6J("ngIf",!o.isPhone&&!o.diagnosticoCreado)}}function K(t,i){1&t&&(e.TgZ(0,"ion-footer")(1,"div",28)(2,"ion-button",29),e._uU(3," Agendar cita "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("routerLink","/consultas"))}const X=function(t){return{"web-view":t}},W=[{path:"",component:(()=>{class t{constructor(o,n,r,p,_,f,v,h){this.appService=o,this.fb=n,this.alertController=r,this.loadingController=p,this.detalleConsultaService=_,this.router=f,this.authService=v,this.route=h,this.isPhone=!1,this.casoMedicoId="",this.diagnosticoCreado=!1,this.isPhone=this.appService.isPhone,this.consulta=this.fb.group({tipoLesion:[null],formaLesion:[null],numeroLesiones:[null],distribucion:[null],parteDelCuerpo:[null],casoMedicoAceptado:[!1]}),Object.keys(this.consulta.controls).forEach(u=>{var d;null===(d=this.consulta.get(u))||void 0===d||d.disable()});let c=this.route.snapshot.paramMap.get("casoMedicoId");c?(this.casoMedicoId=c,this.detalleConsultaService.obtenerConsulta(c).subscribe({next:u=>{var d,T,x,D,P;console.log("Consulta",u);const b=u.medical_case;u&&(null===(d=this.consulta.get("tipoLesion"))||void 0===d||d.setValue(b.type_of_injury),null===(T=this.consulta.get("formaLesion"))||void 0===T||T.setValue(b.shape_of_injury),null===(x=this.consulta.get("numeroLesiones"))||void 0===x||x.setValue(b.number_of_injuries),null===(D=this.consulta.get("distribucion"))||void 0===D||D.setValue(b.injury_distribucion),null===(P=this.consulta.get("parteDelCuerpo"))||void 0===P||P.setValue(this.appService.obtenerParteCuerpoPorId(b.body_part)),this.obetenerDiagnosticoCasoMedico(this.casoMedicoId))},error:u=>{this.erroObteniendoCasoMedico()}})):this.erroObteniendoCasoMedico(),this.diagnosticoForm=this.fb.group({nombreLesion:[null,[l.kI.required,l.kI.minLength(6),l.kI.maxLength(24)]],diagnostico:[null,[l.kI.required,l.kI.minLength(20),l.kI.maxLength(200)]],tratamiento:[null,[l.kI.required,l.kI.minLength(20),l.kI.maxLength(200)]]})}ngOnInit(){}obetenerDiagnosticoCasoMedico(o){this.detalleConsultaService.obtenerDiagnostico(o).subscribe({next:n=>{var r,p,_,f,v,h,c;console.log("Diagnostico",n);const u=n["medical diagnostic"];u&&(null===(r=this.nombreLesion)||void 0===r||r.setValue(u.name_of_injury),null===(p=this.nombreLesion)||void 0===p||p.disable(),null===(_=this.diagnostico)||void 0===_||_.setValue(u.diagnosis),null===(f=this.diagnostico)||void 0===f||f.disable(),null===(v=this.tratamiento)||void 0===v||v.setValue(u.treatment),null===(h=this.tratamiento)||void 0===h||h.disable(),null===(c=this.casoMedicoAceptado)||void 0===c||c.setValue(!0),this.diagnosticoCreado=!0)},error:n=>{this.erroObteniendoCasoMedico()}})}erroObteniendoCasoMedico(){return(0,g.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Error",message:"Error obteniendo la informaci\xf3n del caso medico",buttons:["Aceptar"]})).present(),this.router.navigateByUrl("/casos-medicos",{replaceUrl:!0})})}aceptarCasoMedico(){var o;return(0,g.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:"Aceptar caso medico",message:"Esta seguro que desea aceptar este caso?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",role:"ok"}]});yield n.present();const{role:r}=yield n.onDidDismiss();"ok"===r&&(null===(o=this.casoMedicoAceptado)||void 0===o||o.setValue(!0))})}crearDiagnostico(){return(0,g.mG)(this,void 0,void 0,function*(){if(this.diagnosticoForm.invalid)Object.keys(this.diagnosticoForm.controls).forEach(o=>{var n;null===(n=this.diagnosticoForm.get(o))||void 0===n||n.markAllAsTouched()});else{const o=yield this.loadingController.create();yield o.present(),this.detalleConsultaService.crearDiagnostico(this.transformarParaBackend(this.diagnosticoForm.value)).subscribe({next:n=>(0,g.mG)(this,void 0,void 0,function*(){yield o.dismiss(),yield(yield this.alertController.create({header:"Creaci\xf3n de diagn\xf3stico",message:"Creaci\xf3n de diagn\xf3stico exitoso",buttons:["Aceptar"]})).present(),this.router.navigateByUrl("/casos-medicos",{replaceUrl:!0})}),error:n=>(0,g.mG)(this,void 0,void 0,function*(){yield o.dismiss(),yield(yield this.alertController.create({header:"Creaci\xf3n de diagn\xf3stico",message:"Hubo un error creando el diagn\xf3stico",buttons:["Aceptar"]})).present()})})}})}transformarParaBackend(o){return{name_of_injury:o.nombreLesion,diagnosis:o.diagnostico,treatment:o.tratamiento,medical_case_uuid:this.casoMedicoId,doctor_uuid:this.authService.user.uuid}}get casoMedicoAceptado(){return this.consulta.get("casoMedicoAceptado")}get nombreLesion(){return this.diagnosticoForm.get("nombreLesion")}get diagnostico(){return this.diagnosticoForm.get("diagnostico")}get tratamiento(){return this.diagnosticoForm.get("tratamiento")}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(L.z),e.Y36(l.qu),e.Y36(a.Br),e.Y36(a.HT),e.Y36(N),e.Y36(m.F0),e.Y36(U.e),e.Y36(m.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-detalle-consulta"]],decls:51,vars:11,consts:[["slot","start"],[3,"ngClass"],[1,"center","titulo-consulta"],["id","consulta-form",3,"formGroup"],[1,"input-group"],["formControlName","tipoLesion","placeholder","Seleccione su tipo de lesi\xf3n",1,"form-item"],[3,"value",4,"ngFor","ngForOf"],["formControlName","formaLesion","placeholder","Seleccione la forma de la lesi\xf3n",1,"form-item"],[1,"question-label"],["formControlName","numeroLesiones","placeholder","Seleccione la cantidad de lesiones",1,"form-item"],["formControlName","distribucion","placeholder","Seleccione la distribuci\xf3n de la lesi\xf3n",1,"form-item"],["placeholder","","formControlName","parteDelCuerpo"],[4,"ngIf"],["class","input-group",4,"ngIf"],[3,"value"],["slot","secondary"],["id","cancelar-button","color","danger","fill","solid","routerLink","/casos-medicos"],["slot","primary"],["id","aceptar-caso-button","color","primary","fill","solid",3,"click"],["id","explicacion",2,"text-align","center"],[1,"capitalize"],["id","diagnostico-form",3,"formGroup","ngSubmit"],["formControlName","nombreLesion","placeholder","Escriba el nombre de la lesi\xf3n",3,"autoGrow"],["class","form-error",4,"ngIf"],["formControlName","diagnostico","placeholder","Escriba el diagn\xf3stico",3,"autoGrow"],["formControlName","tratamiento","placeholder","Escriba el tratamiento",3,"autoGrow"],[1,"form-error"],["id","crear-diagnostico-button","type","submit","color","primary","fill","solid"],[1,"center",2,"text-align","center"],["type","submit","expand","block",3,"routerLink"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Detalle consulta"),e.qZA(),e.TgZ(4,"ion-buttons",0),e._UZ(5,"ion-menu-button"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"div",1)(8,"div",2)(9,"strong"),e._uU(10,"Consulta #1234"),e.qZA()(),e._UZ(11,"br"),e.TgZ(12,"form",3)(13,"div",4)(14,"ion-item")(15,"ion-label"),e._uU(16,"Tipos de lesi\xf3n:"),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-select",5),e.YNc(19,y,2,2,"ion-select-option",6),e.qZA()(),e.TgZ(20,"div")(21,"ion-item")(22,"ion-label"),e._uU(23,"Forma lesi\xf3n"),e.qZA()(),e.TgZ(24,"ion-item")(25,"ion-select",7),e.YNc(26,F,2,2,"ion-select-option",6),e.qZA()()(),e.TgZ(27,"div")(28,"ion-item")(29,"ion-label",8),e._uU(30,"N\xfamero de lesiones"),e.qZA()(),e.TgZ(31,"ion-item")(32,"ion-select",9),e.YNc(33,J,2,2,"ion-select-option",6),e.qZA()()(),e.TgZ(34,"div")(35,"ion-item")(36,"ion-label",8),e._uU(37,"Distribuci\xf3n"),e.qZA()(),e.TgZ(38,"ion-item")(39,"ion-select",10),e.YNc(40,M,2,2,"ion-select-option",6),e.qZA()()(),e.TgZ(41,"div")(42,"ion-item")(43,"ion-label"),e._uU(44," Parte del cuerpo "),e.qZA()(),e.TgZ(45,"ion-item"),e._UZ(46,"ion-input",11),e.qZA()(),e.YNc(47,Q,7,0,"ion-toolbar",12),e.qZA()(),e._UZ(48,"br"),e.YNc(49,$,25,8,"div",13),e.qZA()(),e.YNc(50,K,4,1,"ion-footer",12)),2&o&&(e.xp6(7),e.Q6J("ngClass",e.VKq(9,X,!n.isPhone)),e.xp6(5),e.Q6J("formGroup",n.consulta),e.xp6(7),e.Q6J("ngForOf",n.appService.consulta.tiposDeLesion),e.xp6(7),e.Q6J("ngForOf",n.appService.consulta.formasDeLesiones),e.xp6(7),e.Q6J("ngForOf",n.appService.consulta.numeroDeLesiones),e.xp6(7),e.Q6J("ngForOf",n.appService.consulta.distribucionDeLaLesion),e.xp6(7),e.Q6J("ngIf",!(n.isPhone||null!=n.casoMedicoAceptado&&n.casoMedicoAceptado.value)),e.xp6(2),e.Q6J("ngIf",null==n.casoMedicoAceptado?null:n.casoMedicoAceptado.value),e.xp6(1),e.Q6J("ngIf",n.isPhone))},dependencies:[C.mk,C.sg,C.O5,l._Y,l.JJ,l.JL,a.YG,a.Sm,a.W2,a.fr,a.Gu,a.pK,a.Ie,a.Q$,a.fG,a.t9,a.n0,a.g2,a.wd,a.sr,a.QI,a.j9,a.YI,m.rH,l.sg,l.u],styles:[".titulo-consulta[_ngcontent-%COMP%]{padding-top:25px}"]}),t})()}];let ee=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(W),m.Bz]}),t})(),oe=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[C.ez,l.u5,a.Pc,ee,l.UX]}),t})()}}]);