"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7872],{7872:(ae,T,r)=>{r.r(T),r.d(T,{DetalleConsultaPageModule:()=>ee});var m=r(6895),a=r(433),l=r(5035),c=r(6955),d=r(655),e=r(8256),L=r(3079),x=r(2340),q=r(529);const P=x.N.API.MEDICAL_CASES_URL+x.N.API.API_CREAR_DIAGNOSTICO_ENDPOINT;let I=(()=>{class t{constructor(o){this.http=o}crearDiagnostico(o){return this.http.post(P,o)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(q.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var U=r(7556);function F(t,n){if(1&t&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.value,"")}}function J(t,n){if(1&t&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.value,"")}}function N(t,n){if(1&t&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.value,"")}}function y(t,n){if(1&t&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.value,"")}}function M(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"ion-toolbar")(1,"ion-buttons",15)(2,"ion-button",16),e._uU(3,"Cancelar"),e.qZA()(),e.TgZ(4,"ion-buttons",17)(5,"ion-button",18),e.NdJ("click",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.aceptarCasoMedico())}),e._uU(6,"Aceptar caso"),e.qZA()()()}}function Q(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"El nombre de la lesi\xf3n es requerida"),e.qZA())}function Y(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"El nombre de la lesi\xf3ntiene que tener m\xednimo 6 caracteres"),e.qZA())}function E(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"El nombre de la lesi\xf3ntiene que tener m\xe1ximo 24 caracteres"),e.qZA())}function S(t,n){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,Q,2,0,"span",12),e.YNc(2,Y,2,0,"span",12),e.YNc(3,E,2,0,"span",12),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==o.nombreLesion||null==o.nombreLesion.errors?null:o.nombreLesion.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.nombreLesion||null==o.nombreLesion.errors?null:o.nombreLesion.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==o.nombreLesion||null==o.nombreLesion.errors?null:o.nombreLesion.errors.maxlength)}}function G(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"El diagn\xf3stico es requerido"),e.qZA())}function k(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"El diagn\xf3stico tiene que tener m\xednimo 20 caracteres"),e.qZA())}function O(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"El diagn\xf3stico tiene que tener m\xe1ximo 200 caracteres"),e.qZA())}function j(t,n){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,G,2,0,"span",12),e.YNc(2,k,2,0,"span",12),e.YNc(3,O,2,0,"span",12),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==o.diagnostico||null==o.diagnostico.errors?null:o.diagnostico.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.diagnostico||null==o.diagnostico.errors?null:o.diagnostico.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==o.diagnostico||null==o.diagnostico.errors?null:o.diagnostico.errors.maxlength)}}function w(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"El tratamiento es requerido"),e.qZA())}function B(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"El tratamiento tiene que tener m\xednimo 20 caracteres"),e.qZA())}function z(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"El tratamiento tiene que tener m\xe1ximo 200 caracteres"),e.qZA())}function R(t,n){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,w,2,0,"span",12),e.YNc(2,B,2,0,"span",12),e.YNc(3,z,2,0,"span",12),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==o.tratamiento||null==o.tratamiento.errors?null:o.tratamiento.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.tratamiento||null==o.tratamiento.errors?null:o.tratamiento.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==o.tratamiento||null==o.tratamiento.errors?null:o.tratamiento.errors.maxlength)}}function V(t,n){1&t&&(e.TgZ(0,"ion-toolbar")(1,"ion-buttons",17)(2,"ion-button",27),e._uU(3,"Enviar diagn\xf3stico"),e.qZA()()())}function H(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",4)(1,"div",19)(2,"strong",20),e._uU(3,"Crear diagn\xf3stico"),e.qZA()(),e._UZ(4,"br"),e.TgZ(5,"form",21),e.NdJ("ngSubmit",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.crearDiagnostico())}),e.TgZ(6,"ion-item")(7,"ion-label",8),e._uU(8,"Nombre lesi\xf3n"),e.qZA()(),e.TgZ(9,"ion-item"),e._UZ(10,"ion-textarea",22),e.qZA(),e.YNc(11,S,4,3,"div",23),e.TgZ(12,"ion-item")(13,"ion-label",8),e._uU(14,"Diagn\xf3stico"),e.qZA()(),e.TgZ(15,"ion-item"),e._UZ(16,"ion-textarea",24),e.qZA(),e.YNc(17,j,4,3,"div",23),e.TgZ(18,"ion-item")(19,"ion-label",8),e._uU(20,"Tratamiento"),e.qZA()(),e.TgZ(21,"ion-item"),e._UZ(22,"ion-textarea",25),e.qZA(),e.YNc(23,R,4,3,"div",23),e.YNc(24,V,4,0,"ion-toolbar",12),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(5),e.Q6J("formGroup",o.diagnosticoForm),e.xp6(5),e.Q6J("autoGrow",!0),e.xp6(1),e.Q6J("ngIf",((null==o.nombreLesion?null:o.nombreLesion.dirty)||(null==o.nombreLesion?null:o.nombreLesion.touched))&&(null==o.nombreLesion?null:o.nombreLesion.errors)),e.xp6(5),e.Q6J("autoGrow",!0),e.xp6(1),e.Q6J("ngIf",((null==o.diagnostico?null:o.diagnostico.dirty)||(null==o.diagnostico?null:o.diagnostico.touched))&&(null==o.diagnostico?null:o.diagnostico.errors)),e.xp6(5),e.Q6J("autoGrow",!0),e.xp6(1),e.Q6J("ngIf",((null==o.tratamiento?null:o.tratamiento.dirty)||(null==o.tratamiento?null:o.tratamiento.touched))&&(null==o.tratamiento?null:o.tratamiento.errors)),e.xp6(1),e.Q6J("ngIf",!o.isPhone)}}function $(t,n){1&t&&(e.TgZ(0,"ion-footer")(1,"div",28)(2,"ion-button",29),e._uU(3," Guardar cambios "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("routerLink","/consultas"))}const K=function(t){return{"web-view":t}},X=[{path:"",component:(()=>{class t{constructor(o,i,s,oe,te,ne,ie,le){var g,p,_,f,v,h,Z,b,C;this.appService=o,this.fb=i,this.alertController=s,this.loadingController=oe,this.detalleConsultaService=te,this.router=ne,this.authService=ie,this.route=le,this.isPhone=!1,this.casoMedicoId="",this.isPhone=this.appService.isPhone,this.consulta=this.fb.group({tipoLesion:[null],formaLesion:[null],numeroLesiones:[null],distribucion:[null],parteDelCuerpo:[null],casoMedicoAceptado:[!1]}),Object.keys(this.consulta.controls).forEach(u=>{var A;null===(A=this.consulta.get(u))||void 0===A||A.disable()});let D=this.route.snapshot.paramMap.get("casoMedicoId");if(D){this.casoMedicoId=D;const u=this.authService.getCasoMedico(this.casoMedicoId);console.log(u),u?(null===(g=this.consulta.get("tipoLesion"))||void 0===g||g.setValue(null===(p=u.tipoLesion)||void 0===p?void 0:p.id),null===(_=this.consulta.get("formaLesion"))||void 0===_||_.setValue(null===(f=u.formaLesion)||void 0===f?void 0:f.id),null===(v=this.consulta.get("numeroLesiones"))||void 0===v||v.setValue(null===(h=u.numeroLesiones)||void 0===h?void 0:h.id),null===(Z=this.consulta.get("distribucion"))||void 0===Z||Z.setValue(null===(b=u.distribucion)||void 0===b?void 0:b.id),null===(C=this.consulta.get("parteDelCuerpo"))||void 0===C||C.setValue(u.parteDelCuerpo)):this.erroObteniendoCasoMedico()}else this.erroObteniendoCasoMedico();this.diagnosticoForm=this.fb.group({nombreLesion:[null,[a.kI.required,a.kI.minLength(6),a.kI.maxLength(24)]],diagnostico:[null,[a.kI.required,a.kI.minLength(20),a.kI.maxLength(200)]],tratamiento:[null,[a.kI.required,a.kI.minLength(20),a.kI.maxLength(200)]]})}ngOnInit(){}erroObteniendoCasoMedico(){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Error",message:"Error obteniendo la informacion del caso medico",buttons:["Aceptar"]})).present(),this.router.navigateByUrl("/casos-medicos",{replaceUrl:!0})})}aceptarCasoMedico(){var o;return(0,d.mG)(this,void 0,void 0,function*(){const i=yield this.alertController.create({header:"Aceptar caso medico",message:"Esta seguro que desea aceptar este caso?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",role:"ok"}]});yield i.present();const{role:s}=yield i.onDidDismiss();"ok"===s&&(null===(o=this.casoMedicoAceptado)||void 0===o||o.setValue(!0))})}crearDiagnostico(){return(0,d.mG)(this,void 0,void 0,function*(){if(this.diagnosticoForm.invalid)Object.keys(this.diagnosticoForm.controls).forEach(o=>{var i;null===(i=this.diagnosticoForm.get(o))||void 0===i||i.markAllAsTouched()});else{const o=yield this.loadingController.create();yield o.present(),this.detalleConsultaService.crearDiagnostico(this.transformarParaBackend(this.diagnosticoForm.value)).subscribe({next:i=>(0,d.mG)(this,void 0,void 0,function*(){yield o.dismiss(),yield(yield this.alertController.create({header:"Creaci\xf3n de diagnostico",message:"Creaci\xf3n de diagnostico exitoso",buttons:["Aceptar"]})).present(),this.router.navigateByUrl("/casos-medicos",{replaceUrl:!0})}),error:i=>(0,d.mG)(this,void 0,void 0,function*(){yield o.dismiss(),yield(yield this.alertController.create({header:"Creaci\xf3n de diagnostico",message:"Hubo un error creando el diagnostico",buttons:["Aceptar"]})).present()})})}})}transformarParaBackend(o){return{name_of_injury:o.nombreLesion,diagnosis:o.diagnostico,treatment:o.tratamiento,medical_case_uuid:this.casoMedicoId,doctor_uuid:this.authService.user.uuid}}get casoMedicoAceptado(){return this.consulta.get("casoMedicoAceptado")}get nombreLesion(){return this.diagnosticoForm.get("nombreLesion")}get diagnostico(){return this.diagnosticoForm.get("diagnostico")}get tratamiento(){return this.diagnosticoForm.get("tratamiento")}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(L.z),e.Y36(a.qu),e.Y36(l.Br),e.Y36(l.HT),e.Y36(I),e.Y36(c.F0),e.Y36(U.e),e.Y36(c.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-detalle-consulta"]],decls:51,vars:11,consts:[["slot","start"],[3,"ngClass"],[1,"center","titulo-consulta"],["id","consulta-form",3,"formGroup"],[1,"input-group"],["formControlName","tipoLesion","placeholder","Seleccione su tipo de lesi\xf3n",1,"form-item"],[3,"value",4,"ngFor","ngForOf"],["formControlName","formaLesion","placeholder","Seleccione la forma de la lesi\xf3n",1,"form-item"],[1,"question-label"],["formControlName","numeroLesiones","placeholder","Seleccione la cantidad de lesiones",1,"form-item"],["formControlName","distribucion","placeholder","Seleccione la distribuci\xf3n de la lesi\xf3n",1,"form-item"],["placeholder","","formControlName","parteDelCuerpo"],[4,"ngIf"],["class","input-group",4,"ngIf"],[3,"value"],["slot","secondary"],["id","cancelar-button","color","danger","fill","solid","routerLink","/casos-medicos"],["slot","primary"],["id","aceptar-caso-button","color","primary","fill","solid",3,"click"],["id","explicacion",2,"text-align","center"],[1,"capitalize"],["id","diagnostico-form",3,"formGroup","ngSubmit"],["formControlName","nombreLesion","placeholder","Escriba el nombre de la lesi\xf3n",3,"autoGrow"],["class","form-error",4,"ngIf"],["formControlName","diagnostico","placeholder","Escriba el diagn\xf3stico",3,"autoGrow"],["formControlName","tratamiento","placeholder","Escriba el tratamiento",3,"autoGrow"],[1,"form-error"],["id","crear-diagnostico-button","type","submit","color","primary","fill","solid"],[1,"center",2,"text-align","center"],["type","submit","expand","block",3,"routerLink"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Detalle consulta"),e.qZA(),e.TgZ(4,"ion-buttons",0),e._UZ(5,"ion-menu-button"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"div",1)(8,"div",2)(9,"strong"),e._uU(10,"Consulta #1234"),e.qZA()(),e._UZ(11,"br"),e.TgZ(12,"form",3)(13,"div",4)(14,"ion-item")(15,"ion-label"),e._uU(16,"Tipos de lesi\xf3n:"),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-select",5),e.YNc(19,F,2,2,"ion-select-option",6),e.qZA()(),e.TgZ(20,"div")(21,"ion-item")(22,"ion-label"),e._uU(23,"Forma lesi\xf3n"),e.qZA()(),e.TgZ(24,"ion-item")(25,"ion-select",7),e.YNc(26,J,2,2,"ion-select-option",6),e.qZA()()(),e.TgZ(27,"div")(28,"ion-item")(29,"ion-label",8),e._uU(30,"N\xfamero de lesiones"),e.qZA()(),e.TgZ(31,"ion-item")(32,"ion-select",9),e.YNc(33,N,2,2,"ion-select-option",6),e.qZA()()(),e.TgZ(34,"div")(35,"ion-item")(36,"ion-label",8),e._uU(37,"Distribuci\xf3n"),e.qZA()(),e.TgZ(38,"ion-item")(39,"ion-select",10),e.YNc(40,y,2,2,"ion-select-option",6),e.qZA()()(),e.TgZ(41,"div")(42,"ion-item")(43,"ion-label"),e._uU(44," Parte del cuerpo "),e.qZA()(),e.TgZ(45,"ion-item"),e._UZ(46,"ion-input",11),e.qZA()(),e.YNc(47,M,7,0,"ion-toolbar",12),e.qZA()(),e._UZ(48,"br"),e.YNc(49,H,25,8,"div",13),e.qZA()(),e.YNc(50,$,4,1,"ion-footer",12)),2&o&&(e.xp6(7),e.Q6J("ngClass",e.VKq(9,K,!i.isPhone)),e.xp6(5),e.Q6J("formGroup",i.consulta),e.xp6(7),e.Q6J("ngForOf",i.appService.consulta.tiposDeLesion),e.xp6(7),e.Q6J("ngForOf",i.appService.consulta.formasDeLesiones),e.xp6(7),e.Q6J("ngForOf",i.appService.consulta.numeroDeLesiones),e.xp6(7),e.Q6J("ngForOf",i.appService.consulta.distribucionDeLaLesion),e.xp6(7),e.Q6J("ngIf",!(i.isPhone||null!=i.casoMedicoAceptado&&i.casoMedicoAceptado.value)),e.xp6(2),e.Q6J("ngIf",null==i.casoMedicoAceptado?null:i.casoMedicoAceptado.value),e.xp6(1),e.Q6J("ngIf",i.isPhone))},dependencies:[m.mk,m.sg,m.O5,a._Y,a.JJ,a.JL,l.YG,l.Sm,l.W2,l.fr,l.Gu,l.pK,l.Ie,l.Q$,l.fG,l.t9,l.n0,l.g2,l.wd,l.sr,l.QI,l.j9,l.YI,c.rH,a.sg,a.u],styles:[".titulo-consulta[_ngcontent-%COMP%]{padding-top:25px}"]}),t})()}];let W=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(X),c.Bz]}),t})(),ee=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,a.u5,l.Pc,W,a.UX]}),t})()}}]);