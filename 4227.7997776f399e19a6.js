"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4227],{4227:(C,d,s)=>{s.r(d),s.d(d,{LoginPageModule:()=>J});var u=s(6895),t=s(433),l=s(5035),a=s(1407),g=s(655),e=s(8256),m=s(3079),c=s(2340),h=s(529);const f=c.N.API.API_URL+c.N.API.API_AUTH_ENDPOINT;let v=(()=>{class n{constructor(i){this.http=i}login(i){return this.http.post(f,i)}}return n.\u0275fac=function(i){return new(i||n)(e.LFG(h.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function P(n,r){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",11),e._uU(3,"Dermo App"),e.qZA()()())}function A(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"El correo es requerido"),e.qZA())}function L(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"El correo es inv\xe1lido"),e.qZA())}function Z(n,r){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,A,2,0,"span",0),e.YNc(2,L,2,0,"span",0),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.email||null==i.email.errors?null:i.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.email||null==i.email.errors?null:i.email.errors.email)}}function T(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1a es requerida"),e.qZA())}function w(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1a tiene que tener m\xednimo 6 caracteres"),e.qZA())}function I(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"La contrase\xf1a tiene que tener m\xe1ximo 24 caracteres"),e.qZA())}function _(n,r){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,T,2,0,"span",0),e.YNc(2,w,2,0,"span",0),e.YNc(3,I,2,0,"span",0),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.password||null==i.password.errors?null:i.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.password||null==i.password.errors?null:i.password.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==i.password||null==i.password.errors?null:i.password.errors.maxlength)}}const y=function(n){return{"web-login":n}},U=[{path:"",component:(()=>{class n{constructor(i,o,p,Y,q,N){this.fb=i,this.alertController=o,this.router=p,this.loadingController=Y,this.appService=q,this.authService=N,this.registerPage="",this.isPhone=!1,this.credentials=this.fb.group({email:[null,[t.kI.required,t.kI.email]],password:[null,[t.kI.required,t.kI.minLength(6),t.kI.maxLength(24)]]}),this.isPhone=this.appService.isPhone,this.registerPage=this.isPhone?"/registro":"/registro-medico"}login(){return(0,g.mG)(this,void 0,void 0,function*(){if(this.credentials.invalid)Object.keys(this.credentials.controls).forEach(i=>{var o;null===(o=this.credentials.get(i))||void 0===o||o.markAllAsTouched()});else{const i=yield this.loadingController.create();yield i.present(),this.authService.login(this.credentials.value).subscribe({next:o=>(0,g.mG)(this,void 0,void 0,function*(){yield i.dismiss(),this.router.navigateByUrl("/inicio",{replaceUrl:!0})}),error:o=>(0,g.mG)(this,void 0,void 0,function*(){yield i.dismiss(),yield(yield this.alertController.create({header:"Login fallido",message:o.error.error,buttons:["Aceptar"]})).present()})})}})}get email(){return this.credentials.get("email")}get password(){return this.credentials.get("password")}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(t.qu),e.Y36(l.Br),e.Y36(a.F0),e.Y36(l.HT),e.Y36(m.z),e.Y36(v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:22,vars:8,consts:[[4,"ngIf"],[1,"login-title","top-space"],[1,"top-space",3,"ngClass"],[3,"formGroup","ngSubmit"],[1,"input-group"],["type","email","placeholder","Email","formControlName","email"],["class","form-error",4,"ngIf"],["type","password","placeholder","Password","formControlName","password"],[1,"center","top-space",2,"text-align","center"],["id","login-button","type","submit","expand","block"],["id","registro","type","button","expand","block","color","light","fill","clear",3,"routerLink"],[1,"center"],[1,"form-error"]],template:function(i,o){1&i&&(e.YNc(0,P,4,0,"ion-header",0),e.TgZ(1,"ion-content")(2,"h1",1),e._uU(3," DermoApp "),e.qZA(),e.TgZ(4,"div",2)(5,"form",3),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(6,"div",4)(7,"ion-item")(8,"ion-label"),e._uU(9,"Usuario"),e.qZA(),e._UZ(10,"ion-input",5),e.qZA(),e.YNc(11,Z,3,2,"div",6),e.TgZ(12,"ion-item")(13,"ion-label"),e._uU(14,"Contrase\xf1a"),e.qZA(),e._UZ(15,"ion-input",7),e.qZA(),e.YNc(16,_,4,3,"div",6),e.qZA(),e.TgZ(17,"div",8)(18,"ion-button",9),e._uU(19," Iniciar sesi\xf3n "),e.qZA(),e.TgZ(20,"a",10),e._uU(21," Registrarse "),e.qZA()()()()()),2&i&&(e.Q6J("ngIf",o.isPhone),e.xp6(4),e.Q6J("ngClass",e.VKq(6,y,!o.isPhone)),e.xp6(1),e.Q6J("formGroup",o.credentials),e.xp6(6),e.Q6J("ngIf",((null==o.email?null:o.email.dirty)||(null==o.email?null:o.email.touched))&&(null==o.email?null:o.email.errors)),e.xp6(5),e.Q6J("ngIf",((null==o.password?null:o.password.dirty)||(null==o.password?null:o.password.touched))&&(null==o.password?null:o.password.errors)),e.xp6(4),e.Q6J("routerLink",o.registerPage))},dependencies:[u.mk,u.O5,t._Y,t.JJ,t.JL,l.YG,l.W2,l.Gu,l.pK,l.Ie,l.Q$,l.wd,l.sr,l.j9,l.Fo,a.rH,t.sg,t.u],styles:[".web-login[_ngcontent-%COMP%]{max-width:460px;text-align:center;margin:auto;width:60%;padding:10px}.login-title[_ngcontent-%COMP%]{text-align:center}.top-space[_ngcontent-%COMP%]{padding-top:96px}"]}),n})()}];let x=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[a.Bz.forChild(U),a.Bz]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,t.u5,l.Pc,x,t.UX]}),n})()}}]);