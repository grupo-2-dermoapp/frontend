"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6174],{6174:(M,u,r)=>{r.r(u),r.d(u,{AgendaPageModule:()=>N});var s=r(6895),h=r(433),o=r(5035),g=r(6955),c=r(655),e=r(8256),v=r(7556),l=r(2340),m=r(529);const A=l.N.API.AGENDA_URL;let f=(()=>{class t{constructor(n){this.http=n}getAgenda(n){return this.http.get(A+l.N.API.API_AGENDA_ENDPOINT+"/"+n)}getEvento(n){return this.http.get(A+l.N.API.API_AGENDAR_CITA_ENDPOINT+"/"+n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(m.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function p(t,a){1&t&&(e.TgZ(0,"ion-item")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"No tiene ninguna cita asignada"),e.qZA()()())}function P(t,a){if(1&t&&(e.TgZ(0,"ion-item")(1,"ion-card-header",3)(2,"ion-card-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-card-subtitle"),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&t){const n=a.$implicit,i=a.index;e.xp6(1),e.MGl("id","agenda-",i,""),e.xp6(2),e.hij("Cita m\xe9dica ",i+1,""),e.xp6(2),e.hij("El horario de la cita m\xe9dica es: ",e.lcZ(6,3,n.start_date),"")}}const Z=[{path:"",component:(()=>{class t{constructor(n,i,d,y,E){this.authService=n,this.agendaService=i,this.alertController=d,this.loadingController=y,this.router=E,this.eventos=[]}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){const n=yield this.loadingController.create({message:"Obteniendo agenda del medico"});yield n.present(),this.agendaService.getAgenda(this.authService.user.uuid).subscribe({next:i=>{console.log(i),this.obtenerAgendaMedico(i.agenda.events),n.dismiss()},error:i=>{console.log(i),this.erroObteniendoAgendaMedico(),n.dismiss()}})})}erroObteniendoAgendaMedico(){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Error",message:"Error obteniendo la agenda del medico",buttons:["Aceptar"]})).present(),this.router.navigateByUrl("/inicio",{replaceUrl:!0})})}obtenerAgendaMedico(n){return(0,c.mG)(this,void 0,void 0,function*(){n.forEach(i=>{this.agendaService.getEvento(i).subscribe({next:d=>{this.eventos.push(d.event),console.log(d)},error:d=>{console.log(d)}})})})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.e),e.Y36(f),e.Y36(o.Br),e.Y36(o.HT),e.Y36(g.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-agenda"]],decls:11,vars:2,consts:[["slot","start"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"id"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Agenda"),e.qZA(),e.TgZ(4,"ion-buttons",0),e._UZ(5,"ion-menu-button"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-list"),e.YNc(8,p,4,0,"ion-item",1),e.YNc(9,P,7,5,"ion-item",2),e.qZA(),e._UZ(10,"ion-card"),e.qZA()),2&n&&(e.xp6(8),e.Q6J("ngIf",0===i.eventos.length),e.xp6(1),e.Q6J("ngForOf",i.eventos))},dependencies:[s.sg,s.O5,o.Sm,o.PM,o.Zi,o.tO,o.Dq,o.W2,o.Gu,o.Ie,o.q_,o.fG,o.wd,o.sr,s.uU]}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(Z),g.Bz]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez,h.u5,o.Pc,I]}),t})()}}]);