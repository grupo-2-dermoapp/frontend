"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8802],{8802:(N,m,s)=>{s.r(m),s.d(m,{LoginPageModule:()=>J});var c=s(6895),a=s(4006),l=s(5035),p=s(4032),u=s(5122),d=s(655),n=s(8274),_=s(3079),h=s(7556);function f(e,t){if(1&e){const i=n.EpF();n.TgZ(0,"a",13),n.NdJ("click",function(){n.CHM(i);const r=n.oxw(2);return n.KtG(r.cambiarIdioma("en"))}),n._uU(1,"English"),n.qZA()}}function x(e,t){if(1&e){const i=n.EpF();n.TgZ(0,"a",13),n.NdJ("click",function(){n.CHM(i);const r=n.oxw(2);return n.KtG(r.cambiarIdioma("es"))}),n._uU(1,"Spanish"),n.qZA()}}function P(e,t){if(1&e&&(n.TgZ(0,"nav")(1,"ul",11)(2,"li"),n.YNc(3,f,2,0,"a",12),n.YNc(4,x,2,0,"a",12),n.qZA()()()),2&e){const i=n.oxw();n.xp6(3),n.Q6J("ngIf","es"===i.lang),n.xp6(1),n.Q6J("ngIf","en"===i.lang)}}function Z(e,t){if(1&e){const i=n.EpF();n.TgZ(0,"a",13),n.NdJ("click",function(){n.CHM(i);const r=n.oxw(2);return n.KtG(r.cambiarIdioma("en"))}),n._uU(1,"English"),n.qZA()}}function v(e,t){if(1&e){const i=n.EpF();n.TgZ(0,"a",13),n.NdJ("click",function(){n.CHM(i);const r=n.oxw(2);return n.KtG(r.cambiarIdioma("es"))}),n._uU(1,"Spanish"),n.qZA()}}function L(e,t){if(1&e&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",14),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.YNc(5,Z,2,0,"a",12),n.YNc(6,v,2,0,"a",12),n.qZA()()),2&e){const i=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,3,"login.tituloApp")),n.xp6(2),n.Q6J("ngIf","es"===i.lang),n.xp6(1),n.Q6J("ngIf","en"===i.lang)}}function T(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"login.usuarioRequerido")))}function A(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"login.usuarioValido")))}function C(e,t){if(1&e&&(n.TgZ(0,"div",15),n.YNc(1,T,3,3,"span",0),n.YNc(2,A,3,3,"span",0),n.qZA()),2&e){const i=n.oxw();n.xp6(1),n.Q6J("ngIf",null==i.email||null==i.email.errors?null:i.email.errors.required),n.xp6(1),n.Q6J("ngIf",null==i.email||null==i.email.errors?null:i.email.errors.email)}}function b(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"login.contrasenaRequerida")))}function w(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"login.minimoCaracteresContrasena")))}function M(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"login.maximoCaracteresContrasena")))}function q(e,t){if(1&e&&(n.TgZ(0,"div",15),n.YNc(1,b,3,3,"span",0),n.YNc(2,w,3,3,"span",0),n.YNc(3,M,3,3,"span",0),n.qZA()),2&e){const i=n.oxw();n.xp6(1),n.Q6J("ngIf",null==i.password||null==i.password.errors?null:i.password.errors.required),n.xp6(1),n.Q6J("ngIf",null==i.password||null==i.password.errors?null:i.password.errors.minlength),n.xp6(1),n.Q6J("ngIf",null==i.password||null==i.password.errors?null:i.password.errors.maxlength)}}const I=function(e){return{"web-login":e}},O=[{path:"",component:(()=>{class e{constructor(i,o,r,k,U,Y,g){this.fb=i,this.alertController=o,this.router=r,this.loadingController=k,this.appService=U,this.authService=Y,this.translate=g,this.registerPage=[],this.isPhone=!1,this.lang="es",this.credentials=this.fb.group({email:[null,[a.kI.required,a.kI.email]],password:[null,[a.kI.required,a.kI.minLength(6),a.kI.maxLength(24)]]}),this.isPhone=this.appService.isPhone,this.registerPage=this.isPhone?["/registro"]:["/registro-medico"],g.addLangs(["en"]),g.setDefaultLang("es"),g.use(this.lang.match(/en/)?this.lang:"es")}login(){return(0,d.mG)(this,void 0,void 0,function*(){if(this.credentials.invalid)Object.keys(this.credentials.controls).forEach(i=>{var o;null===(o=this.credentials.get(i))||void 0===o||o.markAllAsTouched()});else{const i=yield this.loadingController.create();yield i.present(),console.log(this.credentials.value),this.authService.login(this.credentials.value).subscribe({next:o=>(0,d.mG)(this,void 0,void 0,function*(){yield i.dismiss(),console.log("Resp",o.user),this.authService.setUser(o.user),this.router.navigateByUrl("/inicio",{replaceUrl:!0})}),error:o=>(0,d.mG)(this,void 0,void 0,function*(){yield i.dismiss(),yield(yield this.alertController.create({header:"Login fallido",message:o.error.error,buttons:["Aceptar"]})).present()})})}})}goToRegister(){this.router.navigate(this.registerPage,{replaceUrl:!0})}get email(){return this.credentials.get("email")}get password(){return this.credentials.get("password")}cambiarIdioma(i){this.lang=i,this.translate.use(i)}}return e.\u0275fac=function(i){return new(i||e)(n.Y36(a.qu),n.Y36(l.Br),n.Y36(u.F0),n.Y36(l.HT),n.Y36(_.z),n.Y36(h.e),n.Y36(p.sK))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],decls:30,vars:29,consts:[[4,"ngIf"],[1,"login-title","top-space"],[1,"top-space",3,"ngClass"],["id","login-form",3,"formGroup","ngSubmit"],[1,"input-group"],["type","email","formControlName","email",3,"placeholder"],["class","form-error",4,"ngIf"],["type","password","formControlName","password",3,"placeholder"],[1,"center","top-space",2,"text-align","center"],["id","login-button","type","submit","expand","block"],["id","registro","type","button","expand","block","color","light","fill","clear",2,"padding","7px 10px",3,"click"],[1,"list-item"],[3,"click",4,"ngIf"],[3,"click"],[1,"center"],[1,"form-error"]],template:function(i,o){1&i&&(n.YNc(0,P,5,2,"nav",0),n.YNc(1,L,7,5,"ion-header",0),n.TgZ(2,"ion-content")(3,"h1",1),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.TgZ(6,"div",2)(7,"form",3),n.NdJ("ngSubmit",function(){return o.login()}),n.TgZ(8,"div",4)(9,"ion-item")(10,"ion-label"),n._uU(11),n.ALo(12,"translate"),n.qZA(),n._UZ(13,"ion-input",5),n.ALo(14,"translate"),n.qZA(),n.YNc(15,C,3,2,"div",6),n.TgZ(16,"ion-item")(17,"ion-label"),n._uU(18),n.ALo(19,"translate"),n.qZA(),n._UZ(20,"ion-input",7),n.ALo(21,"translate"),n.qZA(),n.YNc(22,q,4,3,"div",6),n.qZA(),n.TgZ(23,"div",8)(24,"ion-button",9),n._uU(25),n.ALo(26,"translate"),n.qZA(),n.TgZ(27,"a",10),n.NdJ("click",function(){return o.goToRegister()}),n._uU(28),n.ALo(29,"translate"),n.qZA()()()()()),2&i&&(n.Q6J("ngIf",!o.isPhone),n.xp6(1),n.Q6J("ngIf",o.isPhone),n.xp6(3),n.hij(" ",n.lcZ(5,13,"login.titulo")," "),n.xp6(2),n.Q6J("ngClass",n.VKq(27,I,!o.isPhone)),n.xp6(1),n.Q6J("formGroup",o.credentials),n.xp6(4),n.Oqu(n.lcZ(12,15,"login.usuario")),n.xp6(2),n.s9C("placeholder",n.lcZ(14,17,"login.placeholderUsuario")),n.xp6(2),n.Q6J("ngIf",((null==o.email?null:o.email.dirty)||(null==o.email?null:o.email.touched))&&(null==o.email?null:o.email.errors)),n.xp6(3),n.Oqu(n.lcZ(19,19,"login.contrasena")),n.xp6(2),n.s9C("placeholder",n.lcZ(21,21,"login.placeholderContrasena")),n.xp6(2),n.Q6J("ngIf",((null==o.password?null:o.password.dirty)||(null==o.password?null:o.password.touched))&&(null==o.password?null:o.password.errors)),n.xp6(3),n.hij(" ",n.lcZ(26,23,"login.botonIniciarSesion")," "),n.xp6(3),n.hij(" ",n.lcZ(29,25,"login.botonRegistrarse")," "))},dependencies:[c.mk,c.O5,a._Y,a.JJ,a.JL,l.YG,l.W2,l.Gu,l.pK,l.Ie,l.Q$,l.wd,l.sr,l.j9,a.sg,a.u,p.X$],styles:[".web-login[_ngcontent-%COMP%]{max-width:460px;text-align:center;margin:auto;width:60%;padding:10px}.login-title[_ngcontent-%COMP%]{text-align:center}.top-space[_ngcontent-%COMP%]{padding-top:70px}*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box;text-decoration:none;font-family:arial,tahoma;list-style:none}nav[_ngcontent-%COMP%]{height:80px;background-color:#222;border-bottom:1px solid #555}.list-item[_ngcontent-%COMP%]{float:right;margin-right:25px;margin-top:17px}.list-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;padding:13px;font-size:18px;border-radius:3px;transition:all .7s ease-in-out}.list-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#eee}.list-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#2a47a5}.toggle[_ngcontent-%COMP%]{float:right;margin:10px;color:#eee;font-size:30px;border:1px solid #EEE;padding:0 5px;border-radius:4px;cursor:pointer}@media (max-width: 1309px){.icon[_ngcontent-%COMP%]{display:block;width:100%;height:80px;background-color:#111;border-bottom:1px solid #444}.list-item[_ngcontent-%COMP%]{width:100%;margin:0;padding:0;position:relative;top:-4px;background-color:#222;display:none}.list-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;display:block;border-bottom:1px solid #333;float:none}}"]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[u.Bz.forChild(O),u.Bz]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[c.ez,a.u5,l.Pc,y,a.UX,p.aw]}),e})()}}]);