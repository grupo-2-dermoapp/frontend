"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5017],{5017:(F,C,r)=>{r.r(C),r.d(C,{CasosMedicosPageModule:()=>U});var u=r(6895),c=r(433),n=r(5035),p=r(6955),g=r(655),h=r(8675),v=r(4004),f=r(9751),o=r(8256),m=r(2340),M=r(529);const Z=m.N.API.MEDICAL_CASES_URL+m.N.API.API_CASOS_MEDICOS_ENDPOINT;let b=(()=>{class s{constructor(e){this.http=e}obtenerCasosMedicos(){return this.http.get(Z)}}return s.\u0275fac=function(e){return new(e||s)(o.LFG(M.eN))},s.\u0275prov=o.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var P=r(7556),A=r(3079);function y(s,a){if(1&s){const e=o.EpF();o.TgZ(0,"ion-row")(1,"ion-col"),o._uU(2),o.qZA(),o.TgZ(3,"ion-col"),o._uU(4),o.qZA(),o.TgZ(5,"ion-col"),o._uU(6),o.qZA(),o.TgZ(7,"ion-col"),o._uU(8),o.qZA(),o.TgZ(9,"ion-col"),o._uU(10),o.qZA(),o.TgZ(11,"ion-col"),o._uU(12),o.qZA(),o.TgZ(13,"ion-col"),o._uU(14),o.qZA(),o.TgZ(15,"ion-col")(16,"ion-button",5),o.NdJ("click",function(){const d=o.CHM(e).$implicit,l=o.oxw();return o.KtG(l.verDetalleCasoMedico(d))}),o._uU(17,"Seleccionar"),o.qZA()()()}if(2&s){const e=a.$implicit,i=a.index;o.xp6(2),o.Oqu(i+1),o.xp6(2),o.Oqu(e.paciente.nombre),o.xp6(2),o.Oqu(e.tipoLesion.value),o.xp6(2),o.Oqu(e.formaLesion.value),o.xp6(2),o.Oqu(e.numeroLesiones.value),o.xp6(2),o.Oqu(e.distribucion.value),o.xp6(2),o.Oqu(e.parteDelCuerpo)}}const O=[{path:"",component:(()=>{class s{constructor(e,i,t,d,l,x,S){this.casosMedicosService=e,this.authService=i,this.loadingController=t,this.router=d,this.alertController=l,this.fb=x,this.appService=S,this.casos=[],this.filtroCasosMedicos=new f.y,this.casosMedicosForm=this.fb.group({casosMedicosCtrl:[null]})}busquedaCasosMedicos(){var e;this.filtroCasosMedicos=null===(e=this.casosMedicosForm.get("casosMedicosCtrl"))||void 0===e?void 0:e.valueChanges.pipe((0,h.O)(""),(0,v.U)(i=>i?this._filtroCasosMedicos(i):this.casos))}_filtroCasosMedicos(e){if("string"==typeof e){const i=e.toLowerCase();return this.casos.filter(t=>(null==t?void 0:t.paciente.nombre.toLowerCase()).includes(i))}return""}verDetalleCasoMedico(e){this.router.navigate(["/detalle-consulta",{casoMedicoId:e.casoMedicoId}])}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create();yield e.present(),this.casosMedicosService.obtenerCasosMedicos().subscribe({next:i=>(0,g.mG)(this,void 0,void 0,function*(){yield e.dismiss(),this.casos=this.convertirCasosMedicosBackendAFrontEnd(i.medical_cases),console.log(this.casos),this.busquedaCasosMedicos()}),error:i=>(0,g.mG)(this,void 0,void 0,function*(){yield e.dismiss(),yield(yield this.alertController.create({header:"Error obteniendo los casos medicos",message:i.error.error,buttons:["Aceptar"]})).present()})})})}convertirCasosMedicosBackendAFrontEnd(e){let i=[];return e.forEach((t,d)=>{var l;return i.push({tipoDeDiagnostico:t.type_of_diagnosis,casoMedicoId:t.uuid,tipoLesion:this.appService.obtenerConsultaPorId("tiposDeLesion",t.type_of_injury),formaLesion:this.appService.obtenerConsultaPorId("formasDeLesiones",t.shape_of_injury),numeroLesiones:this.appService.obtenerConsultaPorId("numeroDeLesiones",t.number_of_injuries),distribucion:this.appService.obtenerConsultaPorId("distribucionDeLaLesion",t.injury_distribucion),parteDelCuerpo:this.appService.obtenerParteCuerpoPorId(t.body_part),paciente:{nombre:null===(l=null==t?void 0:t.patient)||void 0===l?void 0:l.names}})}),i}}return s.\u0275fac=function(e){return new(e||s)(o.Y36(b),o.Y36(P.e),o.Y36(n.HT),o.Y36(p.F0),o.Y36(n.Br),o.Y36(c.qu),o.Y36(A.z))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-casos-medicos"]],decls:32,vars:4,consts:[["slot","start"],[1,"ion-margin"],[3,"formGroup"],["type","text","placeholder","Escriba palabra clave de busqueda","formControlName","casosMedicosCtrl"],[4,"ngFor","ngForOf"],["expand","block",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o._uU(3,"Casos medicos"),o.qZA(),o.TgZ(4,"ion-buttons",0),o._UZ(5,"ion-menu-button"),o.qZA()()(),o.TgZ(6,"ion-content",1)(7,"form",2)(8,"ion-item")(9,"ion-label"),o._uU(10,"Buscar Casos Medicos"),o.qZA(),o._UZ(11,"ion-input",3),o.qZA()(),o.TgZ(12,"ion-grid",1)(13,"ion-row")(14,"ion-col"),o._uU(15,"No."),o.qZA(),o.TgZ(16,"ion-col"),o._uU(17,"Nombre paciente"),o.qZA(),o.TgZ(18,"ion-col"),o._uU(19,"Tipo"),o.qZA(),o.TgZ(20,"ion-col"),o._uU(21,"Forma"),o.qZA(),o.TgZ(22,"ion-col"),o._uU(23,"N\xfamero"),o.qZA(),o.TgZ(24,"ion-col"),o._uU(25,"Distribuci\xf3n"),o.qZA(),o.TgZ(26,"ion-col"),o._uU(27,"Parte del cuerpo"),o.qZA(),o.TgZ(28,"ion-col"),o._uU(29,"Seleccionar"),o.qZA()(),o.YNc(30,y,18,7,"ion-row",4),o.ALo(31,"async"),o.qZA()()),2&e&&(o.xp6(7),o.Q6J("formGroup",i.casosMedicosForm),o.xp6(23),o.Q6J("ngForOf",o.lcZ(31,2,i.filtroCasosMedicos)))},dependencies:[u.sg,c._Y,c.JJ,c.JL,n.YG,n.Sm,n.wI,n.W2,n.jY,n.Gu,n.pK,n.Ie,n.Q$,n.fG,n.Nd,n.wd,n.sr,n.j9,c.sg,c.u,u.Ov],styles:[".web-casos-medicos[_ngcontent-%COMP%]{max-width:860px;text-align:center;margin:auto;width:60%;padding:10px}ion-grid[_ngcontent-%COMP%]{--ion-grid-column-padding: 10px;border-collapse:collapse;border-style:hidden}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:first-child{background-color:#2d2dd3;font-weight:700}ion-grid[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border:1px solid black;border-bottom:0;border-right:0}ion-grid[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:last-child{border-right:1px solid black}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:last-child{border-bottom:1px solid black}"]}),s})()}];let T=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({imports:[p.Bz.forChild(O),p.Bz]}),s})(),U=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({imports:[u.ez,c.u5,n.Pc,T,c.UX]}),s})()}}]);