"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4482],{4576:(T,u,c)=>{c.r(u),c.d(u,{NotificacionesPageModule:()=>y});var l=c(6895),p=c(4006),n=c(5035),f=c(5122),d=c(655),i=c(8274),h=c(7556),g=c(2340),m=c(529);const N=g.N.API.MEDICAL_CASES_URL;let v=(()=>{class o{constructor(e){this.http=e}getNotificaciones(e){return this.http.get(N+g.N.API.API_NOTIFICACIONES_ENDPOINT+"/"+e)}}return o.\u0275fac=function(e){return new(e||o)(i.LFG(m.eN))},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var P=c(3079);function A(o,s){1&o&&(i.TgZ(0,"ion-item")(1,"ion-card-header")(2,"ion-card-title"),i._uU(3,"No tiene notificaciones"),i.qZA()()())}function C(o,s){if(1&o&&(i.TgZ(0,"ion-item")(1,"ion-card-content",3)(2,"strong"),i._uU(3),i.qZA(),i._uU(4),i.qZA()()),2&o){const e=s.$implicit,t=s.index;i.xp6(1),i.MGl("id","notificacion-",t,""),i.xp6(2),i.hij("Notifiaci\xf3n ",t+1,":"),i.xp6(1),i.hij(" ",e.message," ")}}const I=[{path:"",component:(()=>{class o{constructor(e,t,a,r,Z,F){this.authService=e,this.notificacionesService=t,this.alertController=a,this.loadingController=r,this.router=Z,this.appService=F,this.notificaciones=[]}ngOnInit(){return(0,d.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create({message:"Obteniendo agenda del medico"});yield e.present(),this.notificacionesService.getNotificaciones(this.authService.user.uuid).subscribe({next:t=>{console.log(t),this.notificaciones=t.notifications,this.transformarNombreParteDelCuerpo(this.notificaciones),e.dismiss()},error:t=>{console.log(t),this.erroObteniendoNotificaciones(),e.dismiss()}})})}transformarNombreParteDelCuerpo(e){e.forEach(t=>{const a=t.message.split("BodyPart."),r=a[1].split(" ")[0];console.log(r),this.appService.obtenerParteCuerpoPorId(r),t.message=a[0]+this.appService.obtenerParteCuerpoPorId(r)+" ha sido realizado"})}erroObteniendoNotificaciones(){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Error",message:"Error obteniendo notificaciones",buttons:["Aceptar"]})).present(),this.router.navigateByUrl("/inicio",{replaceUrl:!0})})}}return o.\u0275fac=function(e){return new(e||o)(i.Y36(h.e),i.Y36(v),i.Y36(n.Br),i.Y36(n.HT),i.Y36(f.F0),i.Y36(P.z))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-notificaciones"]],decls:10,vars:2,consts:[["slot","start"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"id"]],template:function(e,t){1&e&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i._uU(3,"Notificaciones"),i.qZA(),i.TgZ(4,"ion-buttons",0),i._UZ(5,"ion-menu-button"),i.qZA()()(),i.TgZ(6,"ion-content")(7,"ion-list"),i.YNc(8,A,4,0,"ion-item",1),i.YNc(9,C,5,3,"ion-item",2),i.qZA()()),2&e&&(i.xp6(8),i.Q6J("ngIf",0===t.notificaciones.length),i.xp6(1),i.Q6J("ngForOf",t.notificaciones))},dependencies:[l.sg,l.O5,n.Sm,n.FN,n.Zi,n.Dq,n.W2,n.Gu,n.Ie,n.q_,n.fG,n.wd,n.sr]}),o})()}];let S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[f.Bz.forChild(I),f.Bz]}),o})(),y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[l.ez,p.u5,n.Pc,S]}),o})()}}]);