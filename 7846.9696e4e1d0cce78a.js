"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7846],{7846:(H,d,a)=>{a.r(d),a.d(d,{ConsultasPageModule:()=>x});var r=a(6895),v=a(4006),n=a(5035),c=a(5122),u=a(655),t=a(8274),m=a(3079),C=a(7556),h=a(2340),f=a(529);const P=h.N.API.CLINICAL_HISTORY_URL+h.N.API.API_HISTORIAS_CLINICAS_ENDPOINT;let A=(()=>{class e{constructor(i){this.http=i}obtenerHistoriasCLinicas(i){return this.http.get(P+"/"+i)}}return e.\u0275fac=function(i){return new(i||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=a(4032);function Z(e,s){if(1&e&&(t.TgZ(0,"div")(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.qZA(),t.TgZ(6,"ion-list")(7,"ion-item")(8,"ion-label"),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"ion-item"),t._UZ(12,"ion-textarea",6),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ion-item")(15,"ion-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"ion-input",7),t.ALo(19,"date"),t.qZA()()()),2&e){const i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"consultas.historiaPaciente")),t.xp6(3),t.Oqu(null==i.paciente?null:i.paciente.nombre),t.xp6(4),t.Oqu(t.lcZ(10,10,"consultas.infoPaciente")),t.xp6(3),t.s9C("placeholder",t.lcZ(13,12,"consultas.placeHolderTratamiento")),t.s9C("value",i.informacionPaciente),t.Q6J("autoGrow",!0),t.xp6(4),t.Oqu(t.lcZ(17,14,"consultas.fechaActualizacion")),t.xp6(2),t.s9C("value",t.lcZ(19,16,null==i.historiaClinica?null:i.historiaClinica.ultimaActualizacion))}}const I=function(e){return{casoMedicoId:e}},L=function(e){return["/detalle-consulta",e]};function T(e,s){if(1&e&&(t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-button",8),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&e){const i=s.$implicit,o=s.index;t.xp6(2),t.AsE("",t.lcZ(3,5,"consultas.casoMedico")," ",o+1,""),t.xp6(2),t.MGl("id","caso-medico-",o+1,""),t.Q6J("routerLink",t.VKq(11,L,t.VKq(9,I,i))),t.xp6(1),t.Oqu(t.lcZ(6,7,"consultas.verDetalle"))}}const S=function(e){return{"web-view":e}},y=[{path:"",component:(()=>{class e{constructor(i,o,l,g,b,M,U){this.appService=i,this.route=o,this.authService=l,this.alertController=g,this.router=b,this.consultasService=M,this.loadingController=U,this.isPhone=!1,this.paciente=null,this.informacionPaciente="",this.historiaClinica=null,this.isPhone=this.appService.isPhone}crearInformacionPaciente(){var i,o,l;this.informacionPaciente=`Edad: ${null===(i=this.paciente)||void 0===i?void 0:i.edad}\nEmail: ${null===(o=this.paciente)||void 0===o?void 0:o.email}\nLocaci\xf3n: ${null===(l=this.paciente)||void 0===l?void 0:l.locacion}`}obtenerHistoriasClinicas(i){return(0,u.mG)(this,void 0,void 0,function*(){const o=yield this.loadingController.create();yield o.present(),this.consultasService.obtenerHistoriasCLinicas(i).subscribe({next:l=>(0,u.mG)(this,void 0,void 0,function*(){yield o.dismiss(),this.historiaClinica=this.convertirHistoriasClinicasBackendAFrontEnd(l.clinical_history),console.log(this.historiaClinica)}),error:l=>(0,u.mG)(this,void 0,void 0,function*(){yield o.dismiss(),yield(yield this.alertController.create({header:"Error obteniendo la historia clinica",message:l.error.error,buttons:["Aceptar"]})).present()})})})}convertirHistoriasClinicasBackendAFrontEnd(i){return{pacienteId:i.patient_uuid,ultimaActualizacion:i.updated_at,casosMedicos:i.medical_cases}}ngOnInit(){const i=this.route.snapshot.paramMap.get("pacienteId");null===i?this.erroObteniendoPaciente():this.isPhone?this.obtenerHistoriasClinicas(i):this.cargaInfoParaMedico(i)}cargaInfoParaMedico(i){this.paciente=this.authService.getPaciente(i),console.log("Paciente: ",this.paciente),this.paciente?(this.crearInformacionPaciente(),this.obtenerHistoriasClinicas(this.paciente.uuid)):this.erroObteniendoPaciente()}erroObteniendoPaciente(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Error",message:"Error obteniendo la informacion del paciente",buttons:["Aceptar"]})).present(),this.router.navigateByUrl(this.isPhone?"/inicio":"/historias-clinicas",{replaceUrl:!0})})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(m.z),t.Y36(c.gz),t.Y36(C.e),t.Y36(n.Br),t.Y36(c.F0),t.Y36(A),t.Y36(n.HT))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-consultas"]],decls:15,vars:11,consts:[["slot","start"],[2,"text-align","center"],[3,"ngClass"],[4,"ngIf"],["id","lista-consultas-medicas"],[4,"ngFor","ngForOf"],["disabled","true",3,"autoGrow","placeholder","value"],[3,"value"],["slot","end",3,"id","routerLink"]],template:function(i,o){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-buttons",0),t._UZ(6,"ion-menu-button"),t.qZA()()(),t.TgZ(7,"ion-content",1)(8,"div",2),t.YNc(9,Z,20,18,"div",3),t.TgZ(10,"h2"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"ion-list",4),t.YNc(14,T,7,13,"ion-item",5),t.qZA()()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,5,"consultas.titulo")),t.xp6(5),t.Q6J("ngClass",t.VKq(9,S,!o.isPhone)),t.xp6(1),t.Q6J("ngIf",!o.isPhone),t.xp6(2),t.Oqu(t.lcZ(12,7,"consultas.listadoConsultas")),t.xp6(3),t.Q6J("ngForOf",null==o.historiaClinica?null:o.historiaClinica.casosMedicos))},dependencies:[r.mk,r.sg,r.O5,n.YG,n.Sm,n.W2,n.Gu,n.pK,n.Ie,n.Q$,n.q_,n.fG,n.g2,n.wd,n.sr,n.j9,n.YI,c.rH,r.uU,p.X$]}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(y),c.Bz]}),e})(),x=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.ez,v.u5,n.Pc,O,p.aw]}),e})()}}]);