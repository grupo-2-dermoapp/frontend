"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9188],{9188:(U,m,o)=>{o.r(m),o.d(m,{HistoriasClinicasPageModule:()=>Z});var v=o(6895),l=o(433),n=o(5035),h=o(6955),c=o(655),f=o(9751),C=o(8675),g=o(4004),i=o(8256),u=o(2340),P=o(529);const A=u.N.API.AUTH_API_URL+u.N.API.API_PATIENTS;let I=(()=>{class e{constructor(t){this.http=t}getPatients(){return this.http.get(A)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(P.eN))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var H=o(3079),S=o(7556);function y(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-item",7)(1,"ion-label"),i._uU(2),i.qZA(),i.TgZ(3,"ion-button",8),i.NdJ("click",function(){const d=i.CHM(t).$implicit,p=i.oxw();return i.KtG(p.verHistoriaClinica(d))}),i._uU(4,"Ver detalles"),i.qZA()()}if(2&e){const t=a.$implicit;i.xp6(2),i.Oqu(t.nombre)}}const T=[{path:"",component:(()=>{class e{constructor(t,s,r,d,p,N,b){this.historiasClinicasService=t,this.loadingController=s,this.router=r,this.alertController=d,this.fb=p,this.appService=N,this.authService=b,this.pacientes=[],this.filtroPacientes=new f.y,this.filtroPacienteForm=this.fb.group({pacienteCrtl:[null]})}busquedaCasosMedicos(){var t;this.filtroPacientes=null===(t=this.filtroPacienteForm.get("pacienteCrtl"))||void 0===t?void 0:t.valueChanges.pipe((0,C.O)(""),(0,g.U)(s=>s?this._filtroPacientes(s):this.pacientes))}_filtroPacientes(t){if("string"==typeof t){const s=t.toLowerCase();return this.pacientes.filter(r=>(null==r?void 0:r.nombre.toLowerCase()).includes(s))}return""}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.loadingController.create();yield t.present(),this.historiasClinicasService.getPatients().subscribe({next:s=>(0,c.mG)(this,void 0,void 0,function*(){yield t.dismiss(),this.pacientes=this.convertirPacientesBackendAFrontEnd(s.patients),console.log(this.pacientes),this.busquedaCasosMedicos()}),error:s=>(0,c.mG)(this,void 0,void 0,function*(){yield t.dismiss(),yield(yield this.alertController.create({header:"Error obteniendo los pacientes",message:s.error.error,buttons:["Aceptar"]})).present()})})})}convertirPacientesBackendAFrontEnd(t){const s=[];return t.forEach(r=>s.push({uuid:r.uuid,nombre:r.names,edad:r.age,email:r.email,locacion:r.location})),s}verHistoriaClinica(t){return(0,c.mG)(this,void 0,void 0,function*(){this.authService.setPaciente(t),yield this.router.navigate(["/consultas",{pacienteId:t.uuid}])})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(I),i.Y36(n.HT),i.Y36(h.F0),i.Y36(n.Br),i.Y36(l.qu),i.Y36(H.z),i.Y36(S.e))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-historias-clinicas"]],decls:19,vars:4,consts:[["slot","start"],[1,"web-view"],[1,"input-group"],[3,"formGroup"],["type","text","placeholder","Escriba palabra clave de busqueda","formControlName","pacienteCrtl"],["id","lista-pacientes"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","end",3,"click"]],template:function(t,s){1&t&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i._uU(3,"Historias clinicas"),i.qZA(),i.TgZ(4,"ion-buttons",0),i._UZ(5,"ion-menu-button"),i.qZA()()(),i.TgZ(6,"ion-content")(7,"div",1)(8,"div",2)(9,"div")(10,"form",3)(11,"ion-item")(12,"ion-label"),i._uU(13,"Filtrar por paciente"),i.qZA(),i._UZ(14,"ion-input",4),i.qZA()(),i._UZ(15,"br"),i.TgZ(16,"ion-list",5),i.YNc(17,y,5,1,"ion-item",6),i.ALo(18,"async"),i.qZA()()()()()),2&t&&(i.xp6(10),i.Q6J("formGroup",s.filtroPacienteForm),i.xp6(7),i.Q6J("ngForOf",i.lcZ(18,2,s.filtroPacientes)))},dependencies:[v.sg,l._Y,l.JJ,l.JL,n.YG,n.Sm,n.W2,n.Gu,n.pK,n.Ie,n.Q$,n.q_,n.fG,n.wd,n.sr,n.j9,l.sg,l.u,v.Ov]}),e})()}];let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[h.Bz.forChild(T),h.Bz]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[v.ez,l.u5,n.Pc,F,l.UX]}),e})()}}]);