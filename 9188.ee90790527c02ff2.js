"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9188],{9188:(U,C,e)=>{e.r(C),e.d(C,{HistoriasClinicasPageModule:()=>L});var h=e(6895),l=e(4006),n=e(5035),v=e(5122),c=e(655),m=e(9751),g=e(8675),P=e(4004),i=e(8274),u=e(2340),A=e(529);const I=u.N.API.AUTH_API_URL+u.N.API.API_PATIENTS;let H=(()=>{class s{constructor(t){this.http=t}getPatients(){return this.http.get(I)}}return s.\u0275fac=function(t){return new(t||s)(i.LFG(A.eN))},s.\u0275prov=i.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var Z=e(3079),S=e(7556),f=e(4032);function y(s,a){if(1&s){const t=i.EpF();i.TgZ(0,"ion-item",7)(1,"ion-label"),i._uU(2),i.qZA(),i.TgZ(3,"ion-button",8),i.NdJ("click",function(){const d=i.CHM(t).$implicit,p=i.oxw();return i.KtG(p.verHistoriaClinica(d))}),i._uU(4),i.ALo(5,"translate"),i.qZA()()}if(2&s){const t=a.$implicit;i.xp6(2),i.Oqu(t.nombre),i.xp6(2),i.Oqu(i.lcZ(5,2,"historiasClinicas.botonDetalles"))}}const T=[{path:"",component:(()=>{class s{constructor(t,o,r,d,p,N,O){this.historiasClinicasService=t,this.loadingController=o,this.router=r,this.alertController=d,this.fb=p,this.appService=N,this.authService=O,this.pacientes=[],this.filtroPacientes=new m.y,this.filtroPacienteForm=this.fb.group({pacienteCrtl:[null]})}busquedaCasosMedicos(){var t;this.filtroPacientes=null===(t=this.filtroPacienteForm.get("pacienteCrtl"))||void 0===t?void 0:t.valueChanges.pipe((0,g.O)(""),(0,P.U)(o=>o?this._filtroPacientes(o):this.pacientes))}_filtroPacientes(t){if("string"==typeof t){const o=t.toLowerCase();return this.pacientes.filter(r=>(null==r?void 0:r.nombre.toLowerCase()).includes(o))}return""}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.loadingController.create();yield t.present(),this.historiasClinicasService.getPatients().subscribe({next:o=>(0,c.mG)(this,void 0,void 0,function*(){yield t.dismiss(),this.pacientes=this.convertirPacientesBackendAFrontEnd(o.patients),console.log(this.pacientes),this.busquedaCasosMedicos()}),error:o=>(0,c.mG)(this,void 0,void 0,function*(){yield t.dismiss(),yield(yield this.alertController.create({header:"Error obteniendo los pacientes",message:o.error.error,buttons:["Aceptar"]})).present()})})})}convertirPacientesBackendAFrontEnd(t){const o=[];return t.forEach(r=>o.push({uuid:r.uuid,nombre:r.names,edad:r.age,email:r.email,locacion:r.location})),o}verHistoriaClinica(t){return(0,c.mG)(this,void 0,void 0,function*(){this.authService.setPaciente(t),yield this.router.navigate(["/consultas",{pacienteId:t.uuid}])})}}return s.\u0275fac=function(t){return new(t||s)(i.Y36(H),i.Y36(n.HT),i.Y36(v.F0),i.Y36(n.Br),i.Y36(l.qu),i.Y36(Z.z),i.Y36(S.e))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-historias-clinicas"]],decls:22,vars:13,consts:[["slot","start"],[1,"web-view"],[1,"input-group"],[3,"formGroup"],["type","text","formControlName","pacienteCrtl",3,"placeholder"],["id","lista-pacientes"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","end",3,"click"]],template:function(t,o){1&t&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.TgZ(5,"ion-buttons",0),i._UZ(6,"ion-menu-button"),i.qZA()()(),i.TgZ(7,"ion-content")(8,"div",1)(9,"div",2)(10,"div")(11,"form",3)(12,"ion-item")(13,"ion-label"),i._uU(14),i.ALo(15,"translate"),i.qZA(),i._UZ(16,"ion-input",4),i.ALo(17,"translate"),i.qZA()(),i._UZ(18,"br"),i.TgZ(19,"ion-list",5),i.YNc(20,y,6,4,"ion-item",6),i.ALo(21,"async"),i.qZA()()()()()),2&t&&(i.xp6(3),i.Oqu(i.lcZ(4,5,"historiasClinicas.titulo")),i.xp6(8),i.Q6J("formGroup",o.filtroPacienteForm),i.xp6(3),i.Oqu(i.lcZ(15,7,"historiasClinicas.filtrarPaciente")),i.xp6(2),i.s9C("placeholder",i.lcZ(17,9,"historiasClinicas.placeHolderFiltro")),i.xp6(4),i.Q6J("ngForOf",i.lcZ(21,11,o.filtroPacientes)))},dependencies:[h.sg,l._Y,l.JJ,l.JL,n.YG,n.Sm,n.W2,n.Gu,n.pK,n.Ie,n.Q$,n.q_,n.fG,n.wd,n.sr,n.j9,l.sg,l.u,h.Ov,f.X$]}),s})()}];let F=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[v.Bz.forChild(T),v.Bz]}),s})(),L=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[h.ez,l.u5,n.Pc,F,l.UX,f.aw]}),s})()}}]);